================================================================================
    PENJELASAN LENGKAP STRUKTUR FOLDER & FILE
    PLN UID Lampung Humas - Dokumentasi Files & Directories
    Versi: 1.0 | Last Updated: 31 Januari 2026
================================================================================

ğŸ“‚ WORKSPACE ROOT STRUCTURE
================================================================================

humasplnuidlampung/
â”œâ”€â”€ .git/                                    [Version Control Repository]
â”œâ”€â”€ .venv/                                   [Virtual Environment - Python]
â”œâ”€â”€ __pycache__/                             [Python Bytecode Cache]
â”œâ”€â”€ scripts/                                 [Helper Scripts Directory]
â”‚   â”œâ”€â”€ check_users.py
â”‚   â”œâ”€â”€ hash_check.py
â”‚   â”œâ”€â”€ set_admin_pass.py
â”‚   â”œâ”€â”€ test_login_admin.py
â”‚   â””â”€â”€ update_and_test_dea.py
â”œâ”€â”€ dokum.txt                                [Old Documentation Backup]
â”œâ”€â”€ main.py                                  [Main Application (Streamlit)]
â”œâ”€â”€ requirements.txt                         [Python Dependencies]
â”œâ”€â”€ smoke_test.py                            [Database Testing & Validation]
â”œâ”€â”€ smoke_output.txt                         [Test Output Log]
â”œâ”€â”€ tools_inspect_db.py                      [Database Inspection Tool]
â”œâ”€â”€ PLN_Ultimate_Monitoring_V7.db            [Main SQLite Database]
â”œâ”€â”€ PLN_Ultimate_Monitoring_V7.db-shm        [WAL Shadow File]
â”œâ”€â”€ PLN_Ultimate_Monitoring_V7.db-wal        [WAL Log File]
â”œâ”€â”€ DOKUMENTASI_LENGKAP.txt                  [Complete System Documentation]
â””â”€â”€ STRUKTUR_FOLDER_DAN_FILES.txt            [This File]


================================================================================
ğŸ—‚ï¸ DETAILED FOLDER & FILE EXPLANATIONS
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. .git/ DIRECTORY (Hidden Folder)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Version Control System (Git repository)
â”œâ”€ Tracks all code changes & history
â””â”€ Enable collaboration & rollback capability

CONTENTS:
â”œâ”€â”€ config              [Local git configuration]
â”œâ”€â”€ objects/            [Compressed objects (commits, trees, blobs)]
â”œâ”€â”€ refs/               [References to branches & tags]
â”œâ”€â”€ HEAD               [Current branch pointer]
â”œâ”€â”€ logs/              [Reflog (history of HEAD movements)]
â”œâ”€â”€ hooks/             [Git hooks for automation]
â””â”€â”€ index              [Staging area]

HOW IT WORKS:
1. When you run: git add .
   â””â”€ Files staged dalam index (ready to commit)

2. When you run: git commit -m "message"
   â””â”€ Files simpan dalam objects/ dengan unique hash

3. When you run: git push -u origin main
   â””â”€ Local commits di-upload ke remote (GitHub/GitLab)

COMMON OPERATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Check status:
$ git status
â†’ Shows: modified files, staged files, untracked files

View history:
$ git log
â†’ Shows: all commits dengan timestamp, author, message

View changes:
$ git diff
â†’ Shows: line-by-line changes sejak last commit

Revert changes:
$ git reset --hard HEAD
â†’ Discard all changes, kembali ke last commit

Clone repository (untuk orang baru):
$ git clone <repo-url>
â†’ Download seluruh .git & working files


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. .venv/ DIRECTORY (Virtual Environment)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Isolated Python environment untuk project ini
â”œâ”€ Prevent package conflict dengan global Python
â”œâ”€ Lock specific package versions
â””â”€ Easy setup untuk developer lain

CONTENTS:
â”œâ”€â”€ bin/                [Executable scripts (Linux/Mac)]
â”‚   â”œâ”€â”€ python         [Python interpreter]
â”‚   â”œâ”€â”€ pip            [Package manager]
â”‚   â”œâ”€â”€ activate       [Activation script]
â”‚   â””â”€â”€ ... (other CLI tools)
â”œâ”€â”€ Lib/                [Python packages & dependencies]
â”‚   â””â”€â”€ site-packages/  [Installed packages]
â”œâ”€â”€ include/            [C header files for extensions]
â””â”€â”€ pyvenv.cfg         [Configuration file]

HOW IT WORKS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. CREATE Virtual Environment:
   $ python -m venv .venv
   
   This creates:
   â”œâ”€ Isolated Python interpreter copy
   â””â”€ Empty site-packages directory

2. ACTIVATE Virtual Environment:
   
   Windows (PowerShell):
   $ .\.venv\Scripts\Activate.ps1
   
   Windows (CMD):
   $ .venv\Scripts\activate.bat
   
   Linux/Mac:
   $ source .venv/bin/activate
   
   Signs (prompt changes):
   (.venv) $ â† venv name prepended to terminal prompt

3. INSTALL Packages:
   $ pip install -r requirements.txt
   
   All packages installed dalam .venv/Lib/site-packages/
   NOT dalam global Python site-packages

4. DEACTIVATE Virtual Environment:
   $ deactivate
   
   Back to global Python environment

WHY USE VIRTUAL ENVIRONMENT?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Scenario WITHOUT venv:
â”œâ”€ Project A memerlukan: pandas==1.0.0, numpy==1.18.0
â”œâ”€ Project B memerlukan: pandas==2.0.0, numpy==1.24.0
â”œâ”€ pip install semuanya â†’ CONFLICT!
â””â”€ Program bisa crash atau behave unexpectedly

Scenario WITH venv:
â”œâ”€ Project A punya .venv dengan pandas==1.0.0
â”œâ”€ Project B punya .venv dengan pandas==2.0.0
â”œâ”€ Each project dapat package version yang cocok
â””â”€ No conflict! ğŸ‰

IMPORTANT: .venv/ TIDAK DISIMPAN DI GIT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Lihat .gitignore file:
```
.venv/
venv/
env/
```

Alasan:
â”œâ”€ Size: .venv/ bisa 50-200 MB (terlalu besar)
â”œâ”€ Platform: .venv tidak portable across OS
â””â”€ Unnecessary: pip install -r requirements.txt sudah cukup

Developer baru setup:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$ git clone <repo>
$ cd project
$ python -m venv .venv
$ .venv\Scripts\activate        [Windows]
$ source .venv/bin/activate     [Linux/Mac]
$ pip install -r requirements.txt
â†’ Selesai! Environment siap pakai

CHECKING VENV STATUS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Which Python is running?
$ which python          [Linux/Mac]
$ where python          [Windows]
â†’ Output: .venv/bin/python (atau .venv\Scripts\python.exe)

Which packages installed?
$ pip list
â†’ Shows: streamlit, pandas, sqlalchemy, dll

Verify package location:
$ pip show streamlit
â†’ Location: .venv/lib/site-packages/streamlit


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. __pycache__/ DIRECTORY (Python Bytecode Cache)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Auto-generated by Python interpreter
â”œâ”€ Store compiled bytecode (.pyc files)
â”œâ”€ Speed up module imports (skip re-compilation)
â””â”€ Created automatically, NOT manually

CONTENTS:
â”œâ”€â”€ main.cpython-39.pyc          [Compiled main.py bytecode]
â”œâ”€â”€ smoke_test.cpython-39.pyc    [Compiled smoke_test.py bytecode]
â””â”€â”€ ... (other .pyc files)

File naming: <module_name>.cpython-<version>.pyc
â”œâ”€ Example: main.cpython-39.pyc = main.py compiled for Python 3.9
â”œâ”€ Example: main.cpython-310.pyc = main.py compiled for Python 3.10

HOW IT WORKS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

First import:
$ python
>>> import main
â†’ Python kompile main.py â†’ bytecode
â†’ Simpan dalam __pycache__/main.cpython-39.pyc
â†’ Load bytecode untuk faster execution

Subsequent imports:
>>> import main
â†’ Python cek: Apakah main.py berubah?
â”œâ”€ NO â†’ Load .pyc bytecode (fast!)
â””â”€ YES â†’ Re-compile & update .pyc

IMPORTANT: __pycache__/ TIDAK DISIMPAN DI GIT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Alasan:
â”œâ”€ Generated automatically (tidak perlu di-commit)
â”œâ”€ .pyc files besar & tidak perlu version control
â”œâ”€ Different Python versions â†’ different .pyc
â””â”€ Cause merge conflicts unnecessarily

Check .gitignore:
```
__pycache__/
*.pyc
```

MANUAL CLEANUP:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Hapus __pycache__ untuk save space:
$ rm -r __pycache__          [Linux/Mac]
$ rmdir /s __pycache__       [Windows CMD]
$ Remove-Item __pycache__ -Recurse  [Windows PowerShell]

Safe untuk dihapus:
â”œâ”€ Python auto-recreate saat ada import
â”œâ”€ Tidak ada data yang hilang
â””â”€ Only side effect: First import sedikit lebih lambat


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. scripts/ DIRECTORY (Helper Scripts)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Utility scripts untuk administrative tasks
â”œâ”€ NOT part dari main application
â”œâ”€ Run secara manual atau via cron job
â””â”€ Support database operations & testing

FILES & FUNGSI:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. scripts/check_users.py
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PURPOSE: Cek semua user dalam database
   
   FUNGSI:
   â”œâ”€ Query table users
   â”œâ”€ Tampilkan: id, username, role, unit, created_at
   â””â”€ Verify user access
   
   USAGE:
   $ python scripts/check_users.py
   
   OUTPUT:
   ID â”‚ username  â”‚ role  â”‚ unit    â”‚ created_at
   â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1  â”‚ admin     â”‚ admin â”‚ ADMIN   â”‚ 2026-01-20
   2  â”‚ humas_01  â”‚ user  â”‚ Humas   â”‚ 2026-01-21
   
   WHEN TO USE:
   â”œâ”€ Verify user list
   â”œâ”€ Troubleshoot login issues
   â”œâ”€ Audit user access


B. scripts/hash_check.py
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PURPOSE: Verify password hashing
   
   FUNGSI:
   â”œâ”€ Test SHA256 hashing algorithm
   â”œâ”€ Debug password mismatch issues
   â””â”€ Generate hash untuk password baru
   
   USAGE:
   $ python scripts/hash_check.py
   
   EXAMPLE OUTPUT:
   Password: "admin123"
   Hash: "8c6976e5b5410c7d25c266a4a3c4ab1f"
   
   WHEN TO USE:
   â”œâ”€ Verify password hashing works correctly
   â”œâ”€ Debug login authentication issues
   â”œâ”€ Generate hash untuk manual INSERT


C. scripts/set_admin_pass.py
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PURPOSE: Reset admin password
   
   FUNGSI:
   â”œâ”€ Set password untuk admin user
   â”œâ”€ Update users table direct (via SQLite)
   â”œâ”€ Verify password after update
   â””â”€ Use WAL mode untuk concurrency
   
   CODE SNIPPET:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ import sqlite3, hashlib                          â”‚
   â”‚ DB = 'PLN_Ultimate_Monitoring_V7.db'             â”‚
   â”‚ conn = sqlite3.connect(DB)                       â”‚
   â”‚ new_hash = hashlib.sha256('admin123'.encode()..  â”‚
   â”‚ conn.execute('UPDATE users SET password = ? ...' â”‚
   â”‚ conn.commit()                                    â”‚
   â”‚ # Verify:                                        â”‚
   â”‚ conn.execute('SELECT password FROM users ...'    â”‚
   â”‚ print(result == new_hash)                        â”‚
   â”‚ conn.close()                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   USAGE:
   1. Edit script: new_hash = hashlib.sha256('NEW_PASSWORD'.encode())...
   2. Run: python scripts/set_admin_pass.py
   3. Verify output: updated rows: 1
   
   WHEN TO USE:
   â”œâ”€ Admin forgot password
   â”œâ”€ Force reset password
   â”œâ”€ Security breach â†’ emergency reset


D. scripts/test_login_admin.py
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PURPOSE: Test admin login functionality
   
   FUNGSI:
   â”œâ”€ Simulate login flow
   â”œâ”€ Verify database connection
   â”œâ”€ Check credentials without UI
   â””â”€ Troubleshoot authentication
   
   USAGE:
   $ python scripts/test_login_admin.py
   
   TEST FLOW:
   â”œâ”€ Connect to database
   â”œâ”€ Query: SELECT * FROM users WHERE username='admin'
   â”œâ”€ Hash input password
   â”œâ”€ Compare hashes
   â”œâ”€ Print: Login successful / Failed
   â””â”€ Verify: User data (id, role, unit)
   
   EXAMPLE OUTPUT:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Testing login...                     â”‚
   â”‚ Username: admin                      â”‚
   â”‚ Password: admin123                   â”‚
   â”‚ âœ… Login successful!                 â”‚
   â”‚ User ID: 1                           â”‚
   â”‚ Role: admin                          â”‚
   â”‚ Unit: ADMIN                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   WHEN TO USE:
   â”œâ”€ Debug login issues
   â”œâ”€ Verify database is accessible
   â”œâ”€ Quick testing tanpa membuka UI


E. scripts/update_and_test_dea.py
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PURPOSE: Batch update & test user data
   
   FUNGSI:
   â”œâ”€ Update multiple users atau records
   â”œâ”€ Data migration atau bulk changes
   â”œâ”€ Test data integrity setelah update
   â””â”€ Verify changes sesuai ekspektasi
   
   USAGE:
   $ python scripts/update_and_test_dea.py
   
   EXAMPLE OPERATIONS:
   â”œâ”€ UPDATE users SET role='admin' WHERE username='test'
   â”œâ”€ UPDATE monitoring_pln SET kategori='Korporat' WHERE kategori IS NULL
   â”œâ”€ INSERT INTO daftar_akun_unit VALUES (...)
   â”œâ”€ SELECT untuk verify: "Apakah updated dengan benar?"
   â””â”€ Print: Success / Failed
   
   WHEN TO USE:
   â”œâ”€ Bulk user role changes
   â”œâ”€ Data cleanup atau normalization
   â”œâ”€ Testing data migration scripts


DIRECTORY LOCATION: scripts/
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Access dari root:
$ python scripts/check_users.py
$ cd scripts && python check_users.py
$ python -m scripts.check_users  [jika punya __init__.py]

SECURITY NOTE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Beberapa scripts akses database langsung (bypass ORM):
â”œâ”€ set_admin_pass.py: Direct password update (for emergency)
â”œâ”€ test_login_admin.py: Direct authentication test
â””â”€ Harus hati-hati dengan permissions

RECOMMENDATION:
â”œâ”€ Simpan scripts/ di folder terlindungi
â”œâ”€ Tidak share credentials di scripts
â”œâ”€ Log changes untuk audit trail


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. requirements.txt (DEPENDENCIES FILE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ List semua Python packages yang diperlukan
â”œâ”€ Specify exact versions (atau ranges)
â”œâ”€ Enable reproducible environments
â””â”€ Share setup dengan developer lain

CURRENT CONTENTS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

streamlit>=1.28.0
â”œâ”€ Web framework untuk UI
â”œâ”€ Version: 1.28.0 atau lebih baru
â””â”€ ~1-2 MB install

pandas>=1.5.0
â”œâ”€ Data manipulation library
â”œâ”€ DataFrame operations, pivot, groupby
â””â”€ ~100 MB install (dengan dependencies)

sqlalchemy>=2.0.0
â”œâ”€ ORM (Object-Relational Mapping)
â”œâ”€ Database abstraction layer
â””â”€ Works dengan SQLite, PostgreSQL, MySQL, dll

instaloader>=4.10.0
â”œâ”€ Instagram scraping library
â”œâ”€ Download posts, captions, engagement metrics
â””â”€ ~5 MB install

xlsxwriter>=3.1.0
â”œâ”€ Excel file generation
â”œâ”€ Create formatted workbooks & worksheets
â””â”€ ~1 MB install

numpy>=1.24.0
â”œâ”€ Numerical computing
â”œâ”€ Random numbers, arrays, mathematical operations
â””â”€ ~100 MB install

FILE FORMAT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

package_name >= version
â””â”€ >= : Greater than atau equal
â””â”€ == : Exact version
â””â”€ ~= : Compatible version
â””â”€ > , < , <= : Other operators

EXAMPLES:
â”œâ”€ streamlit==1.28.0       (exact version)
â”œâ”€ pandas>=1.5.0           (1.5.0 or newer)
â”œâ”€ numpy>=1.24.0,<2.0.0    (version range)
â””â”€ requests~=2.28          (compatible release)

HOW TO USE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. INSTALL Semua dependencies:
   $ pip install -r requirements.txt
   
   This:
   â”œâ”€ Read requirements.txt
   â”œâ”€ Download packages dari PyPI
   â”œâ”€ Install dalam venv/lib/site-packages/
   â””â”€ Create pip.lock file (optional)

2. ADD New dependency:
   Option A (automatic):
   $ pip install new_package
   $ pip freeze > requirements.txt
   
   Option B (manual):
   Edit requirements.txt:
   ```
   streamlit>=1.28.0
   pandas>=1.5.0
   new_package>=1.0.0  â† Add this
   ```

3. UPDATE existing package:
   $ pip install --upgrade package_name
   $ pip freeze > requirements.txt

4. CHECK installed versions:
   $ pip list
   
   Output:
   Package            Version
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   streamlit          1.30.2
   pandas             1.5.3
   sqlalchemy         2.0.1
   instaloader        4.10.0
   xlsxwriter         3.1.2
   numpy              1.24.1

BEST PRACTICES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Always commit requirements.txt ke git
âœ“ Use specific versions (or ranges) untuk stability
âœ“ Regularly update packages (security patches)
âœ“ Test setelah update major version
âœ“ Keep separate requirements files:
  â”œâ”€ requirements-dev.txt (pytest, black, flake8)
  â””â”€ requirements-prod.txt (production only)

VERSION MANAGEMENT STRATEGIES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Strategy 1: Pinned (Exact versions)
â”œâ”€ streamlit==1.28.0
â”œâ”€ pandas==1.5.0
â””â”€ PROS: Reproducible, stable
â””â”€ CONS: Miss security patches

Strategy 2: Loose (Compatible ranges)
â”œâ”€ streamlit>=1.28.0
â”œâ”€ pandas>=1.5.0
â””â”€ PROS: Get updates & patches
â””â”€ CONS: Might introduce breaking changes

Strategy 3: Hybrid (Recommended)
â”œâ”€ streamlit>=1.28.0,<2.0.0    (major version locked)
â”œâ”€ pandas>=1.5.0,<3.0.0
â””â”€ PROS: Balance stability & updates


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. smoke_test.py (DATABASE TESTING & VALIDATION)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ "Smoke test" = quick validation sebelum production
â”œâ”€ Non-destructive checks (read-only queries)
â”œâ”€ Simple insert/update untuk test flows
â”œâ”€ Validate database structure & relationships
â””â”€ Verify data integrity

WHAT IT DOES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. CHECK Database File Exists
   â”œâ”€ Verify PLN_Ultimate_Monitoring_V7.db ada
   â””â”€ Fail fast jika file missing

2. CHECK Required Tables Exist
   â”œâ”€ users
   â”œâ”€ daftar_akun_unit
   â”œâ”€ pengajuan_dokumentasi
   â”œâ”€ dokumentasi_calendar
   â””â”€ monitoring_pln
   
   For each: SELECT name FROM sqlite_master WHERE type='table'

3. CHECK Indices & Constraints
   â”œâ”€ PRAGMA index_list('monitoring_pln')
   â”œâ”€ Verify UNIQUE constraint pada link_pemberitaan
   â””â”€ Ensure indices created untuk optimization

4. INSERT Test Data Flow
   â”œâ”€ Find admin user: SELECT id FROM users WHERE username='admin'
   â”œâ”€ INSERT test unit: daftar_akun_unit (UNIT_TEST, unit_test_ig)
   â”œâ”€ CREATE pengajuan: INSERT into pengajuan_dokumentasi
   â”œâ”€ CREATE calendar: INSERT into dokumentasi_calendar
   â”œâ”€ UPDATE pengajuan: approved â†’ done + hasil links
   â”œâ”€ VERIFY: Check status changes applied correctly
   â””â”€ Final state: Both records marked 'done' dengan hasil links

5. TEST ON CONFLICT Behavior
   â”œâ”€ Insert duplicate link_pemberitaan (should conflict)
   â”œâ”€ Verify ON CONFLICT UPDATE logic works
   â”œâ”€ Confirm: Metrics updated, tidak duplicate created

CODE STRUCTURE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ smoke_test.py                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Setup                                 â”‚
â”‚    â”œâ”€ Connect ke database                â”‚
â”‚    â””â”€ Verify file exists                 â”‚
â”‚                                          â”‚
â”‚ 2. Schema Validation                     â”‚
â”‚    â”œâ”€ Check tables                       â”‚
â”‚    â”œâ”€ Check indices                      â”‚
â”‚    â””â”€ Check constraints                  â”‚
â”‚                                          â”‚
â”‚ 3. Data Integrity Tests                  â”‚
â”‚    â”œâ”€ Find admin user                    â”‚
â”‚    â”œâ”€ Insert test unit                   â”‚
â”‚    â”œâ”€ Create test pengajuan              â”‚
â”‚    â”œâ”€ Create calendar event              â”‚
â”‚    â”œâ”€ Update status flow                 â”‚
â”‚    â””â”€ Verify results                     â”‚
â”‚                                          â”‚
â”‚ 4. ON CONFLICT Tests                     â”‚
â”‚    â”œâ”€ Insert post dengan link            â”‚
â”‚    â”œâ”€ Try insert duplicate link          â”‚
â”‚    â””â”€ Verify conflict handling           â”‚
â”‚                                          â”‚
â”‚ 5. Cleanup (optional)                    â”‚
â”‚    â”œâ”€ Delete test records                â”‚
â”‚    â””â”€ Leave database clean               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USAGE:
â”€â”€â”€â”€â”€â”€

Run smoke test:
$ python smoke_test.py

Output example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DB path: PLN_Ultimate_Monitoring_V7.db â”‚
â”‚ Checking required tables...             â”‚
â”‚  - users: OK                            â”‚
â”‚  - daftar_akun_unit: OK                 â”‚
â”‚  - pengajuan_dokumentasi: OK            â”‚
â”‚  - dokumentasi_calendar: OK             â”‚
â”‚  - monitoring_pln: OK                   â”‚
â”‚                                        â”‚
â”‚ Checking unique index...                â”‚
â”‚ Indexes found: [(...]                  â”‚
â”‚                                        â”‚
â”‚ Admin id: 1                             â”‚
â”‚ Inserting test unit...                  â”‚
â”‚ Unit inserted.                          â”‚
â”‚                                        â”‚
â”‚ Creating test pengajuan...              â”‚
â”‚ Pengajuan id: 5                         â”‚
â”‚                                        â”‚
â”‚ Inserting calendar event...             â”‚
â”‚ Calendar event created.                 â”‚
â”‚                                        â”‚
â”‚ Updating pengajuan to done...           â”‚
â”‚ Pengajuan marked done and hasil links   â”‚
â”‚ saved.                                  â”‚
â”‚                                        â”‚
â”‚ âœ… ALL TESTS PASSED                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WHEN TO USE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Before deploying aplikasi ke production
âœ“ After database migration atau schema changes
âœ“ Debug data flow atau relationship issues
âœ“ Verify database integrity setelah backup restore
âœ“ Quick sanity check tanpa manual testing

ADVANTAGES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Automated testing (no manual steps)
âœ“ Quick (runs dalam seconds)
âœ“ Comprehensive (check multiple flows)
âœ“ Non-destructive (test data isolated)
âœ“ Easy to extend (add more tests)

OPTIONAL: Save Output to File
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

$ python smoke_test.py > smoke_output.txt

File smoke_output.txt:
â”œâ”€ Contains all test output
â”œâ”€ Good untuk documentation
â””â”€ Reference jika ada issues


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7. smoke_output.txt (TEST OUTPUT LOG)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Log output dari smoke_test.py execution
â”œâ”€ Record hasil testing untuk reference
â”œâ”€ Troubleshoot jika test gagal
â””â”€ Documentation untuk code review

CONTENTS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

Timestamp log:
â”œâ”€ When test was run
â”œâ”€ Which tables checked
â”œâ”€ Which data inserted
â”œâ”€ Status results (PASS/FAIL)
â””â”€ Any errors atau warnings

USAGE:
â”€â”€â”€â”€â”€â”€

1. Generate log (redirect output):
   $ python smoke_test.py > smoke_output.txt

2. View log:
   $ cat smoke_output.txt         [Linux/Mac]
   $ type smoke_output.txt        [Windows]
   $ Get-Content smoke_output.txt [PowerShell]

3. Append to existing log:
   $ python smoke_test.py >> smoke_output.txt
   (>> = append, instead of > = overwrite)

ANALYSIS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Search log untuk errors:
$ grep -i error smoke_output.txt
$ grep -i failed smoke_output.txt

Count test results:
$ grep "OK" smoke_output.txt | wc -l
â†’ Shows number of passed tests

Keep log history:
$ cp smoke_output.txt smoke_output_20260131.txt
â†’ Backup dengan timestamp

CLEANUP:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

Clear old log:
$ rm smoke_output.txt
$ echo "" > smoke_output.txt


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8. tools_inspect_db.py (DATABASE INSPECTION & ANALYSIS TOOL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PURPOSE:
â”œâ”€ Inspect & analyze database contents
â”œâ”€ View sample data tanpa opening DB directly
â”œâ”€ Generate insights tentang data distribution
â”œâ”€ Quick analytics without Streamlit UI
â””â”€ Troubleshooting & debugging tool

WHAT IT DOES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. CONNECT ke Database
   â”œâ”€ Open PLN_Ultimate_Monitoring_V7.db
   â”œâ”€ Query top 200 rows dari monitoring_pln
   â””â”€ Convert ke pandas DataFrame

2. DISPLAY Basic Info
   â”œâ”€ Total rows: {count}
   â”œâ”€ Sample data (head)
   â””â”€ Distinct values per column

3. PERFORM Analysis
   â”œâ”€ Pivot table: Unit Ã— Bulan (count posts)
   â”œâ”€ Show most active units
   â”œâ”€ Top accounts by post count
   â”œâ”€ Engagement summary (likes, views)
   â””â”€ Month distribution

CODE STRUCTURE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tools_inspect_db.py                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Import libraries                  â”‚
â”‚    â”œâ”€ sqlite3                        â”‚
â”‚    â””â”€ pandas                         â”‚
â”‚                                      â”‚
â”‚ 2. Connect to DB                     â”‚
â”‚    â””â”€ sqlite3.connect(DB)            â”‚
â”‚                                      â”‚
â”‚ 3. Query data                        â”‚
â”‚    â””â”€ SELECT id, tanggal, bulan,     â”‚
â”‚       judul, link, pic_unit, ..      â”‚
â”‚       FROM monitoring_pln LIMIT 200  â”‚
â”‚                                      â”‚
â”‚ 4. Load to DataFrame                 â”‚
â”‚    â””â”€ pd.read_sql_query(sql, conn)   â”‚
â”‚                                      â”‚
â”‚ 5. Display results                   â”‚
â”‚    â”œâ”€ Print total rows               â”‚
â”‚    â”œâ”€ Print head (first 5 rows)      â”‚
â”‚    â”œâ”€ Print sample id & link         â”‚
â”‚    â””â”€ Print distinct bulan values    â”‚
â”‚                                      â”‚
â”‚ 6. Pivot analysis                    â”‚
â”‚    â”œâ”€ Create pivot table             â”‚
â”‚    â”œâ”€ Unit (rows) Ã— Bulan (columns)  â”‚
â”‚    â”œâ”€ Values: count of link          â”‚
â”‚    â””â”€ Show pivot shape & data        â”‚
â”‚                                      â”‚
â”‚ 7. Top accounts ranking              â”‚
â”‚    â”œâ”€ Group by akun, pic_unit        â”‚
â”‚    â”œâ”€ Count posts                    â”‚
â”‚    â”œâ”€ Sum likes & views              â”‚
â”‚    â””â”€ Display top 10                 â”‚
â”‚                                      â”‚
â”‚ 8. Error handling                    â”‚
â”‚    â””â”€ Try/Except blocks              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USAGE:
â”€â”€â”€â”€â”€â”€

Run inspection:
$ python tools_inspect_db.py

Example Output:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROWS: 245                              â”‚
â”‚                                        â”‚
â”‚ -- id and link sample --               â”‚
â”‚ id  â”‚ link_pemberitaan                 â”‚
â”‚ â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚ 1   â”‚ https://instagram.com/p/123..    â”‚
â”‚ 2   â”‚ https://instagram.com/p/456..    â”‚
â”‚                                        â”‚
â”‚ -- full head --                        â”‚
â”‚ tanggal â”‚ bulan â”‚ judul â”‚ likes â”‚ viewsâ”‚
â”‚ 15/01   â”‚ Jan   â”‚ "..." â”‚ 150   â”‚ 5000 â”‚
â”‚ ...                                    â”‚
â”‚                                        â”‚
â”‚ Distinct bulan values:                 â”‚
â”‚ ['Januari', 'Februari', 'Maret', ...]  â”‚
â”‚                                        â”‚
â”‚ Pivot shape: (5 units, 12 months)      â”‚
â”‚ Pivot:                                 â”‚
â”‚ Unit     â”‚ Jan â”‚ Feb â”‚ Mar â”‚ ... â”‚ Dec â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”‚
â”‚ Humas    â”‚ 15  â”‚ 20  â”‚ 18  â”‚ ... â”‚ 22  â”‚
â”‚ Operasi  â”‚ 10  â”‚ 12  â”‚ 14  â”‚ ... â”‚ 16  â”‚
â”‚                                        â”‚
â”‚ Top accounts by Post count:            â”‚
â”‚ akun              â”‚ Post â”‚ Likes â”‚ Unit â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚
â”‚ @pln_uid_humas    â”‚ 45   â”‚ 8500  â”‚ Humasâ”‚
â”‚ @pln_uid_operasi  â”‚ 32   â”‚ 5200  â”‚ Ops  â”‚
â”‚                                        â”‚
â”‚ (Done, no errors)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WHEN TO USE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Quick data inspection tanpa opening database GUI
âœ“ Verify data distribution & patterns
âœ“ Check data quality (distinct values, null counts)
âœ“ Analyze engagement metrics summary
âœ“ Find top performers / outliers
âœ“ Troubleshoot data consistency issues
âœ“ Quick report generation for stakeholders
âœ“ Performance metrics (row count, data size)

ADVANTAGES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Fast execution (seconds)
âœ“ No dependencies on Streamlit or UI
âœ“ Can run in CI/CD pipelines
âœ“ Easy to extend dengan more analysis
âœ“ Portable (works on any system with Python)
âœ“ Good untuk automated monitoring

EXAMPLE: Run Every Day
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Cron job (Linux/Mac):
0 8 * * * cd /path/to/project && python tools_inspect_db.py > daily_report.txt

Or PowerShell scheduled task (Windows):
$trigger = New-JobTrigger -Daily -At 8:00AM
$action = New-ScheduledJobOption -RunElevated
Register-ScheduledJob -Trigger $trigger -ScriptBlock {python tools_inspect_db.py} -Name DailyInspect


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
9. MAIN APPLICATION FILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A. main.py (PRIMARY APPLICATION)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   SIZE: ~3073 lines (large file!)
   
   PURPOSE:
   â”œâ”€ Main Streamlit application
   â”œâ”€ All UI components & pages
   â”œâ”€ User authentication & role management
   â”œâ”€ Business logic untuk semua features
   â””â”€ Database integration
   
   CONTENT BREAKDOWN:
   â”œâ”€ Imports & Configuration (lines 1-50)
   â”œâ”€ Caching & Session Management (lines 17-48)
   â”œâ”€ Database Functions (lines 52-400)
   â”œâ”€ Authentication Pages (lines 120-300)
   â”œâ”€ Global CSS Styling (lines 500-700)
   â”œâ”€ Helper Functions (lines 699-1000)
   â”œâ”€ Instagram Rate Limiting (lines 747-800)
   â”œâ”€ Scraper Engine (lines 802-912)
   â”œâ”€ Analytics & Export (lines 912-1000)
   â”œâ”€ Calendar Functions (lines 1000-1200)
   â””â”€ Page Routing & Rendering (lines 1150-3073)
   
   PAGE STRUCTURE (Role-based):
   â”œâ”€ LOGIN PAGE (No role)
   â”œâ”€ ADMIN PAGES:
   â”‚  â”œâ”€ Dashboard Admin
   â”‚  â”œâ”€ Rekapitulasi Monitoring
   â”‚  â”œâ”€ Sinkronisasi Data
   â”‚  â”œâ”€ Input Manual
   â”‚  â”œâ”€ Pengajuan Dokumentasi
   â”‚  â”œâ”€ Kalender Dokumentasi
   â”‚  â”œâ”€ Pengaturan Unit (TBD)
   â”‚  â”œâ”€ Manajemen User
   â”‚  â””â”€ Pengaturan Admin
   â””â”€ USER PAGES:
      â”œâ”€ Dashboard User
      â”œâ”€ Kalender Dokumentasi
      â”œâ”€ Pengajuan Dokumentasi
      â””â”€ Riwayat Dokumentasi
   
   HOW TO RUN:
   $ python -m streamlit run main.py
   â†’ Opens browser: http://localhost:8501


B. dokum.txt (OLD DOCUMENTATION BACKUP)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   PURPOSE:
   â”œâ”€ Backup dari dokumentasi lama
   â”œâ”€ Contains old code snippets & notes
   â”œâ”€ Kept for reference (bukan production)
   â””â”€ Can be safely deleted
   
   RECOMMENDATION:
   â”œâ”€ Keep for historical reference
   â””â”€ Or delete jika space needed


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
10. DATABASE FILES (MAIN DATABASE & WAL FILES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A. PLN_Ultimate_Monitoring_V7.db (MAIN DATABASE FILE)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   TYPE: SQLite3 Database (binary format)
   
   SIZE: ~1-50 MB (depending on data amount)
   
   PURPOSE:
   â”œâ”€ Primary data storage
   â”œâ”€ Contains 5 tables: users, units, monitoring, requests, calendar
   â”œâ”€ Persistent storage across application restarts
   â””â”€ Shared between all users
   
   STRUCTURE (Binary):
   â”œâ”€ Database header
   â”œâ”€ Table definitions & schemas
   â”œâ”€ B-tree pages (data storage)
   â”œâ”€ Indices
   â”œâ”€ Free list (deleted space)
   â””â”€ Metadata
   
   HOW TO ACCESS:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   Option 1: Via Python (programmatic)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ import sqlite3                       â”‚
   â”‚ conn = sqlite3.connect('.../db')     â”‚
   â”‚ cursor = conn.cursor()               â”‚
   â”‚ cursor.execute('SELECT * FROM users')â”‚
   â”‚ data = cursor.fetchall()             â”‚
   â”‚ conn.close()                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   Option 2: Command line
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ sqlite3 PLN_Ultimate_Monitoring_V7.dbâ”‚
   â”‚ sqlite> SELECT * FROM users;         â”‚
   â”‚ sqlite> .tables                      â”‚
   â”‚ sqlite> .schema monitoring_pln       â”‚
   â”‚ sqlite> .quit                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   Option 3: GUI tools
   â”œâ”€ DB Browser for SQLite (cross-platform)
   â”œâ”€ SQLiteStudio (advanced)
   â”œâ”€ DataGrip (JetBrains)
   â”œâ”€ SQL Server Management Studio (SSMS)
   â””â”€ phpMyAdmin style web GUI
   
   DOES NOT DELETE WHEN:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   âœ“ Restart application
   âœ“ Browser refresh
   âœ“ Session logout
   â””â”€ Data persists until manually deleted or database cleared

   DELETE / RESET:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   Soft reset (clear data, keep schema):
   $ sqlite3 PLN_Ultimate_Monitoring_V7.db
   sqlite> DELETE FROM monitoring_pln;
   sqlite> DELETE FROM pengajuan_dokumentasi;
   sqlite> .quit
   
   Hard reset (delete entire file):
   $ rm PLN_Ultimate_Monitoring_V7.db
   â†’ Application akan auto-recreate saat di-run
   
   BACKUP:
   â”€â”€â”€â”€â”€â”€â”€
   
   Simple copy:
   $ cp PLN_Ultimate_Monitoring_V7.db PLN_Ultimate_Monitoring_V7_backup_20260131.db
   
   Scheduled backup (Windows):
   powershell:
   $ robocopy . backup PLN_Ultimate_Monitoring_V7.db


B. PLN_Ultimate_Monitoring_V7.db-shm (SHADOW FILE)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   WAL COMPONENT #1: Shadow Memory File
   
   PURPOSE:
   â”œâ”€ Part of Write-Ahead Logging (WAL) mechanism
   â”œâ”€ Temporary file created by SQLite when WAL is enabled
   â”œâ”€ Shared memory index untuk WAL
   â””â”€ Speed up read operations
   
   WHAT IS WAL?
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   Traditional journaling (PRAGMA journal_mode=DELETE):
   â”œâ”€ Write changes ke temp file first
   â”œâ”€ Then write ke main DB file
   â”œâ”€ Then delete temp file
   â””â”€ Slow! (multiple disk I/O)
   
   Write-Ahead Logging (PRAGMA journal_mode=WAL):
   â”œâ”€ Write changes ke WAL log file (fast append)
   â”œâ”€ Main DB file left unchanged
   â”œâ”€ Reader can still read old DB file
   â”œâ”€ Checkpoint process merges WAL into DB
   â””â”€ Better concurrency! (readers & writers parallel)
   
   SIZE: Usually small (< 10 MB)
   
   AUTO-CREATED: When WAL mode is enabled:
   $ PRAGMA journal_mode=WAL;
   
   WHEN USED:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   get_db_connection() in main.py:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ def get_db_connection():             â”‚
   â”‚     conn = sqlite3.connect(DB_PATH..)â”‚
   â”‚     conn.execute("PRAGMA journal... â”‚
   â”‚     return conn                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   SAFE TO DELETE?
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   âœ“ YES, if no active connections
   âš  NO, while application running
   âœ“ Automatically cleaned up by SQLite
   
   Manual cleanup (application must be closed):
   $ rm PLN_Ultimate_Monitoring_V7.db-shm


C. PLN_Ultimate_Monitoring_V7.db-wal (WAL LOG FILE)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   WAL COMPONENT #2: Write-Ahead Log File
   
   PURPOSE:
   â”œâ”€ Contains recently written transactions
   â”œâ”€ Append-only log (faster writes)
   â”œâ”€ Used during recovery if crash happens
   â””â”€ Checkpointed to main DB periodically
   
   SIZE: Usually < 5 MB (depends on transaction volume)
   
   CONTAINS:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   â”œâ”€ INSERT statements log
   â”œâ”€ UPDATE statements log
   â”œâ”€ DELETE statements log
   â”œâ”€ Transaction metadata
   â””â”€ Frame pointers (what's been written)
   
   HOW IT WORKS:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   1. User triggers data change (e.g., INSERT)
   
   2. SQLite writes to WAL log:
      â”œâ”€ Fast (append-only write)
      â””â”€ Safe (can recover if crash)
   
   3. Changes visible immediately to readers
      â””â”€ Reading original DB + WAL file
   
   4. Checkpoint process (periodic):
      â”œâ”€ Merge WAL frames into main DB
      â”œâ”€ Reset WAL log
      â””â”€ Frees disk space
   
   CHECKPOINT TRIGGERS:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   Automatic (defaults):
   â”œâ”€ When WAL reaches ~10 MB
   â”œâ”€ On connection close
   â”œâ”€ Timeout (every 1000 pages)
   
   Manual:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ sqlite3 PLN_Ultimate_Monitoring_V7.dbâ”‚
   â”‚ sqlite> PRAGMA wal_checkpoint(RESTART);
   â”‚ sqlite> .quit                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   Python:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ conn.execute("PRAGMA wal_checkpoint")â”‚
   â”‚ conn.commit()                        â”‚
   â”‚ conn.close()                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   OPTIMIZATION (Force checkpoint):
   $ sqlite3 PLN_Ultimate_Monitoring_V7.db "PRAGMA wal_checkpoint(TRUNCATE);"
   
   SAFE TO DELETE?
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   
   âœ“ YES, after checkpoint (closes app first)
   âš  NO, while application running
   âœ“ Data NOT lost (already in main DB after checkpoint)
   
   Manual cleanup (application must be closed):
   $ rm PLN_Ultimate_Monitoring_V7.db-wal

WAL BENEFITS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Better concurrency (readers & writers simultaneous)
âœ“ Faster writes (append-only, sequential I/O)
âœ“ Crash recovery (WAL log preserved)
âœ“ Reduced lock contention
âœ“ Performance improvement ~5-10x for busy systems

WAL TRADEOFFS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš  Extra files (-shm, -wal)
âš  Slightly larger disk usage
âš  Network filesystems may have issues
âš  Requires more memory (page cache)

DISABLE WAL (if needed):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

$ sqlite3 PLN_Ultimate_Monitoring_V7.db
sqlite> PRAGMA journal_mode=DELETE;
sqlite> .quit

But NOT RECOMMENDED for this application (need concurrency)!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SUMMARY TABLE: FILE PURPOSES & SAFETY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE/FOLDER              â”‚ PURPOSE                    â”‚ CAN DELETE? â”‚ SIZE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
.git/                    â”‚ Version control            â”‚ NO*         â”‚ ~10 MB
.venv/                   â”‚ Python environment         â”‚ YES (safe)  â”‚ 50-200 MB
__pycache__/             â”‚ Python bytecode cache      â”‚ YES (safe)  â”‚ 1-10 MB
scripts/                 â”‚ Admin utilities            â”‚ NO          â”‚ <100 KB
main.py                  â”‚ Main application           â”‚ NO          â”‚ ~100 KB
requirements.txt         â”‚ Dependencies list          â”‚ NO          â”‚ <1 KB
smoke_test.py            â”‚ Database testing           â”‚ NO          â”‚ ~10 KB
smoke_output.txt         â”‚ Test output log            â”‚ YES (safe)  â”‚ varies
tools_inspect_db.py      â”‚ DB inspection tool         â”‚ NO          â”‚ ~5 KB
dokum.txt                â”‚ Old documentation          â”‚ YES (safe)  â”‚ ~100 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
.db (main database)      â”‚ PRIMARY DATA               â”‚ NO (backup!)â”‚ 1-50 MB
.db-shm (WAL shadow)     â”‚ WAL shadow memory          â”‚ YES*        â”‚ <10 MB
.db-wal (WAL log)        â”‚ WAL transaction log        â”‚ YES*        â”‚ <5 MB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€

NOTES:
â”œâ”€ * Can delete ONLY when application NOT RUNNING
â”œâ”€ DELETE = Will lose data/history
â”œâ”€ YES (safe) = Can delete without data loss
â””â”€ All application files should be in git version control


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CLEANUP & MAINTENANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SAFE CLEANUP (RECOMMENDED):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Remove bytecode cache (safe, auto-recreate):
   $ rmdir /s __pycache__           [Windows]
   $ rm -r __pycache__              [Linux]
   â†’ Saves ~5 MB space

2. Remove test logs (safe, old tests):
   $ del smoke_output.txt           [Windows]
   $ rm smoke_output.txt            [Linux]
   â†’ Saves ~varies

3. Remove old DB backup (if have multiple):
   $ del PLN_Ultimate_Monitoring_V7_old.db
   â†’ Manual cleanup

4. Run WAL checkpoint (if app closed):
   $ sqlite3 PLN_Ultimate_Monitoring_V7.db "PRAGMA wal_checkpoint(TRUNCATE);"
   â†’ Merges WAL into main DB, frees space

UNSAFE CLEANUP (AVOID):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ— Delete .git/ â†’ Lose version history
âœ— Delete main.py â†’ App won't run
âœ— Delete requirements.txt â†’ Can't reinstall
âœ— Delete .db file â†’ LOSE ALL DATA
âœ— Delete while app running â†’ Corruption risk

BACKUP STRATEGY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Weekly:
â”œâ”€ Copy .db file to external drive
â”œâ”€ $ cp PLN_Ultimate_Monitoring_V7.db backup/pln_db_$(date +%Y%m%d).db
â””â”€ Or use cloud: Google Drive, OneDrive, etc

Version control:
â”œâ”€ Git backup (code only, not .db)
â”œâ”€ $ git commit -am "Documentation update"
â”œâ”€ $ git push
â””â”€ Good untuk code, not data


================================================================================
END OF DOCUMENTATION
================================================================================

Version: 1.0
Last Update: 31 Januari 2026
Document Type: Folder & File Structure Reference
For Questions: Check main DOKUMENTASI_LENGKAP.txt

================================================================================
