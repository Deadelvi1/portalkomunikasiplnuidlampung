================================================================================
    DOKUMENTASI LENGKAP SISTEM PLN UID LAMPUNG HUMAS
    Platform Manajemen Sosial Media & Pengadaan Dokumentasi
    Versi: 1.0 | Last Updated: 31 Januari 2026
================================================================================

ğŸ“Œ TABLE OF CONTENTS
================================================================================
1. RINGKASAN SISTEM
2. ARSITEKTUR DATABASE & ERD
3. ALUR SISTEM (WORKFLOW)
4. PENJELASAN SETIAP FUNGSI & LIBRARY
5. STRUKTUR DATABASE DETAIL
6. OPERASI DATABASE (CRUD, RESET, MIGRASI)
7. GUIDE PENGGUNAAN SISTEM
8. TROUBLESHOOTING & FAQ

================================================================================
1. RINGKASAN SISTEM
================================================================================

Nama Proyek: PLN UID Lampung Humas - Portal Komunikasi Digital
Tujuan: Platform manajemen konten media sosial dan pengadaan dokumentasi
Teknologi: Python (Streamlit), SQLite3, SQLAlchemy, Instaloader, Pandas

Modul Utama:
âœ… main.py         - Aplikasi utama berbasis Streamlit
âœ… smoke_test.py   - Testing & validasi database flows
âœ… tools_inspect_db.py - Inspect data monitoring
âœ… scripts/        - Helper scripts untuk admin

Database: PLN_Ultimate_Monitoring_V7.db (SQLite3)

Fitur Utama:
1. Dashboard Admin - Monitoring statistik real-time
2. Scraping Instagram - Automasi pengambilan data konten
3. Rekapitulasi Monitoring - Database editor dengan heatmap
4. Sinkronisasi Data - Pull data dari multiple akun
5. Input Manual - Tambah data secara manual
6. Pusat Kendali Dokumentasi - Review & approval pengajuan
7. Kalender Dokumentasi - Visualisasi jadwal kegiatan
8. Manajemen User - CRUD user dengan role-based access

================================================================================
2. ARSITEKTUR DATABASE & ERD (Entity Relationship Diagram)
================================================================================

Catatan penting: Berikut ERD dan schema yang **saat ini diimplementasikan** di `main.py` (apa yang dibuat/di-ALTER saat init). Di bagian bawah ada *rekomendasi* kolom/tabel opsional untuk audit dan pelacakan yang belum diimplementasikan.

AS-IMPLEMENTED (dari `main.py`)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          USERS (Auth)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ id INTEGER PK                 â”‚
â”‚ â€¢ username TEXT UNIQUE NOT NULL â”‚
â”‚ â€¢ password TEXT NOT NULL        â”‚
â”‚ â€¢ role TEXT DEFAULT 'user'      â”‚
â”‚ â€¢ unit TEXT                     â”‚
â”‚ â€¢ created_at TEXT               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PENGAJUAN_DOKUMENTASI (Request)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ id INTEGER PK                                    â”‚
â”‚ â€¢ nama_pengaju TEXT                                 â”‚
â”‚ â€¢ user_id INTEGER (FK â†’ users.id)                   â”‚
â”‚ â€¢ nomor_telpon TEXT                                 â”‚
â”‚ â€¢ unit TEXT                                         â”‚
â”‚ â€¢ tanggal_acara TEXT                                â”‚
â”‚ â€¢ jam_mulai TEXT, jam_selesai TEXT                  â”‚
â”‚ â€¢ output_link_drive TEXT, output_type TEXT          â”‚
â”‚ â€¢ biaya REAL DEFAULT 0                              â”‚
â”‚ â€¢ deadline_penyelesaian TEXT                        â”‚
â”‚ â€¢ status TEXT DEFAULT 'pending'                     â”‚
â”‚ â€¢ hasil_link_drive TEXT, hasil_video TEXT, hasil_flyer TEXT â”‚
â”‚ â€¢ rejection_reason TEXT, notes TEXT                 â”‚
â”‚ â€¢ added_to_calendar INTEGER DEFAULT 0               â”‚
â”‚ â€¢ created_at TEXT, updated_at TEXT                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DOKUMENTASI_CALENDAR (Scheduling)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ id INTEGER PK                                     â”‚
â”‚ â€¢ pengajuan_id INTEGER (FK â†’ pengajuan_dokumentasi.id) â”‚
â”‚ â€¢ tanggal TEXT                                      â”‚
â”‚ â€¢ nama_kegiatan TEXT                                â”‚
â”‚ â€¢ unit TEXT                                         â”‚
â”‚ â€¢ status TEXT                                       â”‚
â”‚ â€¢ doc_link TEXT (nullable)                          â”‚
â”‚ â€¢ created_at TEXT                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DAFTAR_AKUN_UNIT (Account Registry)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ id INTEGER PK                                     â”‚
â”‚ â€¢ nama_unit TEXT                                    â”‚
â”‚ â€¢ username_ig TEXT UNIQUE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       MONITORING_PLN (Content Database - Main)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âˆ id INTEGER PK                                                                            â”‚
â”‚ â€¢ tanggal TEXT, bulan TEXT, tahun TEXT                                                       â”‚
â”‚ â€¢ judul_pemberitaan TEXT                                                                     â”‚
â”‚ â—† link_pemberitaan TEXT UNIQUE (prevent duplicate)                                           â”‚
â”‚ â€¢ platform TEXT (ensure_column sets default 'Instagram' on migration)                        â”‚
â”‚ â€¢ tipe_konten TEXT (ensure_column sets default 'Feeds')                                      â”‚
â”‚ â€¢ pic_unit TEXT                                                                              â”‚
â”‚ â€¢ akun TEXT                                                                                  â”‚
â”‚ â€¢ kategori TEXT                                                                              â”‚
â”‚ â€¢ likes INTEGER DEFAULT 0, comments INTEGER DEFAULT 0, views INTEGER DEFAULT 0               â”‚
â”‚ â€¢ last_updated TEXT                                                                          â”‚
â”‚ â€¢ source TEXT DEFAULT 'Scraping' (added by migration if absent)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELASI ANTAR TABEL (AS-IMPLEMENTED):
- users â†’ pengajuan_dokumentasi: 1-to-many (user_id)
- pengajuan_dokumentasi â†’ dokumentasi_calendar: 1-to-many (pengajuan_id) â€” in UI flows usually 1-to-1, but DB allows multiple calendar rows per pengajuan
- daftar_akun_unit â†’ monitoring_pln: implicit relationship by `username_ig`/`pic_unit` (NO FK in DB)
- monitoring_pln: standalone content table with UNIQUE constraint on `link_pemberitaan`

UNIQUE CONSTRAINTS (AS-IMPLEMENTED):
- users.username [UNIQUE]
- daftar_akun_unit.username_ig [UNIQUE]
- monitoring_pln.link_pemberitaan [UNIQUE]

REKOMENDASI PERUBAHAN SKEMA (OPTIONAL) âœ…
- Add audit trail for manual inputs to improve traceability:
  CREATE TABLE input_manual_log (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      user_id INTEGER,             -- FK â†’ users.id (who input)
      monitoring_id INTEGER,       -- FK â†’ monitoring_pln.id (nullable)
      tanggal_input TEXT,          -- timestamp saat input
      sumber_detail TEXT,          -- deskripsi / cara input (contoh: 'admin form')
      notes TEXT,
      created_at TEXT
  );

- Consider adding `monitoring_pln.created_by INTEGER` and `monitoring_pln.source_details TEXT` if you want to record who added manual records and extra notes (not currently implemented in `main.py`).
- If you want admin-created ad-hoc calendar events without creating a `pengajuan_dokumentasi`, add `dokumentasi_calendar.created_by INTEGER` (FK â†’ users.id) and allow `pengajuan_id` to be nullable; currently the app creates a `pengajuan_dokumentasi` when admin adds an agenda.

Notes:
- The documentation above reflects exactly what `init_db()` and `ensure_columns()` in `main.py` create; recommended additions must be implemented in code (migrations + UI) if desired.

---



================================================================================
3. ALUR SISTEM (WORKFLOW)
================================================================================

A. ALUR AUTENTIKASI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  User Membuka   â”‚
  â”‚  Aplikasi       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Cek Session State: user exists?    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚ NO         â”‚ YES
     â”‚            â”‚
     â†“            â†“
  Show        Load User
  Login       Profile
  Page        (role, unit)
  (Form)      â”‚
  â”‚           â”‚
  â”‚ User input username + password
  â”‚ â”‚
  â”‚ â†“
  â”‚ Hash password (SHA256)
  â”‚ â”‚
  â”‚ â†“
  â”‚ Query: SELECT id, username, role, unit 
  â”‚        FROM users WHERE username=? AND password=?
  â”‚ â”‚
  â”‚ â”œâ”€ Found â†’ Save to session_state['user']
  â”‚ â”‚         Determine role (admin/user)
  â”‚ â”‚         Navigate to Dashboard
  â”‚ â”‚         st.rerun()
  â”‚ â”‚
  â”‚ â””â”€ Not Found â†’ Show error "Username/Password Salah"
  â”‚
  â””â”€â†’ Register Form (Optional)
      â”‚
      â”œâ”€ Input: username, password, confirm, unit
      â”œâ”€ Validasi: password length >= 6, match confirmation
      â”œâ”€ Hash password
      â”œâ”€ INSERT INTO users (username, password, role, unit, created_at)
      â”‚  VALUES (?, ?, 'user', ?, NOW())
      â”œâ”€ Success: Show "Berhasil! Silakan Login"
      â””â”€ Error: "Username sudah terpakai"


B. ALUR ADMIN DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Admin Dashboard (Halaman Pertama)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚                  â”‚
    â†“                     â†“                  â†“
  Load monitoring     Load pengajuan    Load daftar_akun
  _pln data           _dokumentasi      _unit
  â”‚                     â”‚                  â”‚
  â”œâ”€ COUNT(*)          â”œâ”€ COUNT(*)        â””â”€ COUNT(*)
  â”œâ”€ SUM(likes)        â””â”€ GROUP BY status
  â”œâ”€ SUM(views)           (pending/approved
  â”œâ”€ GROUP BY pic_unit     /done/rejected)
  â””â”€ GROUP BY bulan
  
  Display Metrics:
  â€¢ Total Posts, Total Likes, Total Views
  â€¢ Pengajuan Count, Unit Aktif Count
  
  Display Charts:
  â€¢ Area Chart: Tren Publikasi (Bulanan)
  â€¢ Bar Chart: Top 5 Unit Kerja
  â€¢ Progress: Status Dokumentasi (Done/Approved/Pending %)
  
  Display Tabs:
  â€¢ Top Akun Sosmed
  â€¢ Pengajuan Terbaru (10 terakhir)
  â€¢ Rekap Biaya Unit


C. ALUR SCRAPING INSTAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Admin â†’ Sinkronisasi Data       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Pilih Mode:                          â”‚
  â”‚ â€¢ Semua Akun Terdaftar              â”‚
  â”‚ â€¢ Pilih Akun Unit Spesifik          â”‚
  â”‚ â€¢ Input Manual Username Influencer   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ [Optional] Set Filter:
           â”‚  - Bulan target
           â”‚  - Limit post (default 10)
           â”‚  - Date range (custom atau semua waktu)
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Click: ğŸš€ MULAI PROSES SINKRONISASI â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â†’ For each username dalam to_process:
           â”‚   â”‚
           â”‚   â”œâ”€ Cache check: apakah data sudah ada di cache (TTL 1 jam)?
           â”‚   â”‚  â””â”€ YES â†’ Return cached data, skip scrape
           â”‚   â”‚  â””â”€ NO â†’ Lanjut ke step berikutnya
           â”‚   â”‚
           â”‚   â”œâ”€ Rate Limit check:
           â”‚   â”‚  â””â”€ Check jika username udah rate limited
           â”‚   â”‚  â””â”€ Jika ya, tunggu sampai timeout selesai
           â”‚   â”‚
           â”‚   â”œâ”€ Initialize Instaloader:
           â”‚   â”‚  â””â”€ L = instaloader.Instaloader()
           â”‚   â”‚  â””â”€ Set user agent (rotate untuk setiap request)
           â”‚   â”‚
           â”‚   â”œâ”€ Try/Except Loop (max_retries=2):
           â”‚   â”‚  â””â”€ Attempt 0,1,2:
           â”‚   â”‚     â”œâ”€ Profile.from_username(L.context, clean_username)
           â”‚   â”‚     â”œâ”€ If "not found" error â†’ Return empty DataFrame, Show error
           â”‚   â”‚     â”œâ”€ If rate limit error (401, 429, Please wait):
           â”‚   â”‚     â”‚  â”œâ”€ Mark user as rate limited (timeout 15 menit)
           â”‚   â”‚     â”‚  â””â”€ Exponential backoff: sleep 10s, 20s, etc
           â”‚   â”‚     â”‚  â””â”€ Retry jika masih ada attempt tersisa
           â”‚   â”‚     â””â”€ If other error â†’ Return empty, Show error
           â”‚   â”‚
           â”‚   â”œâ”€ Loop through Profile Posts (maximum: limit setting):
           â”‚   â”‚  â””â”€ For each post:
           â”‚   â”‚     â”œâ”€ Filter by month jika target_month != "Semua"
           â”‚   â”‚     â”œâ”€ Filter by date range jika ada setting
           â”‚   â”‚     â”œâ”€ Extract: date, caption, shortcode, likes, views, comments
           â”‚   â”‚     â”œâ”€ Build record dict:
           â”‚   â”‚     â”‚  â”œâ”€ tanggal: DD/MM/YYYY
           â”‚   â”‚     â”‚  â”œâ”€ bulan: Nama bulan (Januari-Desember)
           â”‚   â”‚     â”‚  â”œâ”€ tahun: YYYY
           â”‚   â”‚     â”‚  â”œâ”€ judul_pemberitaan: cleaned caption (max 500 char)
           â”‚   â”‚     â”‚  â”œâ”€ link_pemberitaan: https://instagram.com/p/{shortcode}/
           â”‚   â”‚     â”‚  â”œâ”€ platform: "Instagram"
           â”‚   â”‚     â”‚  â”œâ”€ tipe_konten: "Reels" or "Feeds"
           â”‚   â”‚     â”‚  â”œâ”€ pic_unit: unit_name param
           â”‚   â”‚     â”‚  â”œâ”€ akun: @{clean_username}
           â”‚   â”‚     â”‚  â”œâ”€ kategori: kategori_input
           â”‚   â”‚     â”‚  â”œâ”€ likes, comments, views: integer counts
           â”‚   â”‚     â”‚  â”œâ”€ last_updated: NOW()
           â”‚   â”‚     â”‚  â””â”€ source: "Scraping"
           â”‚   â”‚     â”‚
           â”‚   â”‚     â”œâ”€ Append ke results list
           â”‚   â”‚     â”œâ”€ Adaptive delay:
           â”‚   â”‚     â”‚  â”œâ”€ Base delay: 2 seconds
           â”‚   â”‚     â”‚  â””â”€ Every 5 posts: extra delay (random 1-3s)
           â”‚   â”‚     â”‚
           â”‚   â”‚     â””â”€ Count++
           â”‚   â”‚
           â”‚   â”œâ”€ Convert results ke Pandas DataFrame
           â”‚   â”‚
           â”‚   â”œâ”€ Cache hasil dengan key: {username}_{unit}_{limit}_{month}
           â”‚   â”‚
           â”‚   â””â”€ For each row dalam DataFrame:
           â”‚      â”‚
           â”‚      â”œâ”€ Check: Apakah link_pemberitaan sudah ada di monitoring_pln?
           â”‚      â”‚  â””â”€ YES â†’ UPDATE record (likes, comments, views, last_updated, dll)
           â”‚      â”‚  â””â”€ NO â†’ INSERT record baru
           â”‚      â”‚
           â”‚      â””â”€ Process next
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Sinkronisasi Selesai                 â”‚
  â”‚ Show: Inserted=X, Updated=Y          â”‚
  â”‚ Progress: 100%                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


D. ALUR PENGAJUAN DOKUMENTASI (USER SIDE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ User â†’ Pengajuan Dokumentasi         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Fill Form:                           â”‚
  â”‚ â€¢ Nama Pengaju                       â”‚
  â”‚ â€¢ No Telpon (WhatsApp)               â”‚
  â”‚ â€¢ Tanggal Acara                      â”‚
  â”‚ â€¢ Jam Mulai - Selesai                â”‚
  â”‚ â€¢ Output Type (Foto/Video/Both)      â”‚
  â”‚ â€¢ Biaya (optional)                   â”‚
  â”‚ â€¢ Catatan Khusus                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Click: "Ajukan Sekarang"                       â”‚
  â”‚ INSERT INTO pengajuan_dokumentasi:             â”‚
  â”‚  (nama_pengaju, user_id, nomor_telpon, unit,  â”‚
  â”‚   tanggal_acara, jam_mulai, jam_selesai,     â”‚
  â”‚   output_link_drive, output_type, biaya,      â”‚
  â”‚   status='pending', created_at, updated_at)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ INSERT ke dokumentasi_calendar:                â”‚
  â”‚  (pengajuan_id, tanggal, nama_kegiatan,       â”‚
  â”‚   unit, status='pending', created_at)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Show: "âœ… Pengajuan Terkirim Ke Admin!"        â”‚
  â”‚ Navigate to: Riwayat Dokumentasi              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


E. ALUR APPROVAL DOKUMENTASI (ADMIN SIDE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Admin â†’ Pusat Kendali Dokumentasi    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ View Pengajuan Cards (Status Filter)  â”‚
  â”‚ Default: Semua Status                â”‚
  â”‚ Sortir: Desc by ID (Terbaru dulu)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â†’ Setiap Card menampilkan:
           â”‚   â”œâ”€ ID, Nama Pengaju, Unit, Status Badge
           â”‚   â”œâ”€ Info Dasar: Nama, WhatsApp, Unit, Biaya
           â”‚   â”œâ”€ Jadwal: Tgl, Waktu, Deadline
           â”‚   â”œâ”€ Form Input Hasil (jika approved/done):
           â”‚   â”‚  â”œâ”€ Link Drive
           â”‚   â”‚  â”œâ”€ Link Video
           â”‚   â”‚  â””â”€ Link Flyer
           â”‚   â”‚
           â”‚   â””â”€ Action Buttons:
           â”‚      â”œâ”€ IF status='pending':
           â”‚      â”‚  â”œâ”€ âœ… SETUJUI (â†’ approved)
           â”‚      â”‚  â””â”€ âŒ TOLAK (â†’ rejected + reason)
           â”‚      â”œâ”€ IF status='approved':
           â”‚      â”‚  â””â”€ ğŸ SELESAIKAN (â†’ done)
           â”‚      â””â”€ Always: ğŸ—‘ï¸ HAPUS
           â”‚
           â””â”€â†’ Admin Actions:

      SETUJUI PENGAJUAN:
      â””â”€ UPDATE pengajuan_dokumentasi SET status='approved'
         WHERE id=?
      â””â”€ UPDATE dokumentasi_calendar SET status='approved'
         WHERE pengajuan_id=?

      TOLAK PENGAJUAN:
      â””â”€ Show Modal: "Alasan Penolakan?"
      â””â”€ UPDATE pengajuan_dokumentasi 
         SET status='rejected', rejection_reason=?
         WHERE id=?

      INPUT LINK HASIL (approved/done):
      â””â”€ UPDATE pengajuan_dokumentasi 
         SET hasil_link_drive=?, hasil_video=?, hasil_flyer=?
         WHERE id=?
      â””â”€ NOTIFICATION ke User: "âœ… Hasil dokumentasi tersedia!"

      SELESAIKAN (approved â†’ done):
      â””â”€ UPDATE pengajuan_dokumentasi SET status='done'
         WHERE id=?
      â””â”€ UPDATE dokumentasi_calendar SET status='done'
         WHERE pengajuan_id=?


G. ALUR INPUT MANUAL MONITORING (ADMIN / USER)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Input Manual Page / Form   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Fill Form (see Guide > Input Manual):                      â”‚
  â”‚ â€¢ tanggal, platform, caption, link (optional), unit, akun  â”‚
  â”‚ â€¢ likes/comments/views (optional)                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ VALIDASI:
           â”‚  â”œâ”€ unit & akun required
           â”‚  â”œâ”€ jika link diberikan â†’ cek apakah sudah ada di monitoring_pln (ux_monitoring_link)
           â”‚  â”‚   â””â”€ Conflict handling: append suffix / auto-generate alternative link OR reject with message
           â”‚  â””â”€ semua field format validated
           â”‚
           â”œâ”€ DB ACTIONS (on success):
           â”‚  â”œâ”€ INSERT INTO monitoring_pln (
           â”‚  â”‚    tanggal, bulan, tahun, judul_pemberitaan, link_pemberitaan,
           â”‚  â”‚    platform, tipe_konten, pic_unit, akun, kategori,
           â”‚  â”‚    likes, comments, views, source='Input Manual', source_details, created_by, last_updated)
           â”‚  â”œâ”€ CREATE input_manual_log (user_id=current_user, monitoring_id=inserted_id, tanggal_input=NOW(), sumber_detail='manual form', notes)
           â”‚  â””â”€ Show success: "âœ… Data berhasil disimpan (Input Manual)"
           â”‚
           â””â”€ POST ACTIONS:
              â”œâ”€ Option: "Tambah ke Kalender" â†’ INSERT INTO dokumentasi_calendar (pengajuan_id=NULL, created_by=current_user, tanggal, nama_kegiatan, unit, status='pending')
              â””â”€ Record muncul di Rekap & Dashboard (kpi updated)


H. ALUR ADMIN MENAMBAH EVENT DI KALENDER (AD-HOC)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Calendar Page (Admin view) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Click: "Tambah Event"                                        â”‚
  â”‚ Fill: tanggal, nama_kegiatan, unit, (optional) pengajuan_id     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ DB ACTIONS (on submit):
           â”‚  â”œâ”€ If pengajuan_id provided:
           â”‚  â”‚   â””â”€ UPDATE pengajuan_dokumentasi SET added_to_calendar=1 WHERE id=?
           â”‚  â”œâ”€ INSERT INTO dokumentasi_calendar (pengajuan_id (nullable), created_by=current_user, tanggal, nama_kegiatan, unit, status='pending', created_at=NOW())
           â”‚  â””â”€ Notify responsible unit / show toast
           â”‚
           â””â”€ Calendar refresh â†’ event badge / hover shows details


F. ALUR KALENDER DOKUMENTASI (VISUALISASI)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Kalender Dokumentasi Page  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SELECT: Tahun & Bulan (Picker Controls)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Query dokumentasi_calendar:                    â”‚
  â”‚  SELECT * FROM dokumentasi_calendar           â”‚
  â”‚  WHERE SUBSTR(tanggal, 7,4) = ? AND           â”‚
  â”‚        SUBSTR(tanggal, 4,2) = ?               â”‚
  â”‚  (Filter by selected year & month)            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Build Calendar Grid:                           â”‚
  â”‚  - python.calendar.Calendar object            â”‚
  â”‚  - Weeks list per month                       â”‚
  â”‚  - Create events_map: {day: [list of events]} â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Render HTML Table:                             â”‚
  â”‚  <table class="mini-cal">                      â”‚
  â”‚  â€¢ Header: Sun-Sat                             â”‚
  â”‚  â€¢ Each cell:                                  â”‚
  â”‚    â”œâ”€ Day number                              â”‚
  â”‚    â”œâ”€ Event badges (max 2, +X more)           â”‚
  â”‚    â”œâ”€ Color by status:                        â”‚
  â”‚    â”‚  â”œâ”€ pending: ğŸŸ  orange                   â”‚
  â”‚    â”‚  â”œâ”€ approved: ğŸŸ¢ green                   â”‚
  â”‚    â”‚  â””â”€ done: ğŸ”µ blue                        â”‚
  â”‚    â””â”€ Hover: Show full event name             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
4. PENJELASAN SETIAP FUNGSI & LIBRARY
================================================================================

A. LIBRARY IMPORTS & FUNGSI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ STREAMLIT (User Interface Framework)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ st.set_page_config(): Config halaman (title, layout, icon)
â€¢ st.markdown(): Render HTML & CSS custom styling
â€¢ st.session_state: Browser-side state management (persist antar rerun)
â€¢ st.columns(): Buat layout grid columns
â€¢ st.tabs(): Buat tab interface
â€¢ st.form(): Form submission (semua input dlm form di-submit sekaligus)
â€¢ st.text_input(), st.text_area(), st.number_input(): Input fields
â€¢ st.selectbox(), st.multiselect(): Dropdown selection
â€¢ st.date_input(): Date picker
â€¢ st.button(), st.form_submit_button(): Action buttons
â€¢ st.dataframe(), st.data_editor(): Display & edit tabular data
â€¢ st.chart() (area_chart, bar_chart): Data visualization
â€¢ st.download_button(): File download link
â€¢ st.metric(): Display KPI metrics
â€¢ st.progress(): Progress bar
â€¢ st.success(), st.error(), st.warning(), st.info(): Messages
â€¢ st.rerun(): Refresh halaman (trigger re-execution)
â€¢ st.balloons(), st.toast(): Notifications & celebrate
â€¢ st.container(), st.expander(): Layout containers
â€¢ st.stop(): Halt execution

ğŸ“¦ PANDAS (Data Manipulation)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ pd.read_sql(): Query database & return DataFrame
â€¢ pd.DataFrame(): Create table from dict/list
â€¢ pd.to_datetime(): Parse date strings
â€¢ pd.Series.value_counts(): Count occurrences
â€¢ df.pivot_table(): Cross-tab aggregation
â€¢ df.groupby(): Group by columns & aggregate
â€¢ df.sort_values(): Sort DataFrame
â€¢ df.drop(): Remove columns/rows
â€¢ df.fillna(): Fill missing values
â€¢ df.head(), df.tail(): First/last N rows
â€¢ df.to_excel(): Write to Excel (via xlsxwriter)
â€¢ df.to_dict(): Convert DataFrame to dict

ğŸ“¦ SQLALCHEMY & SQLITE3 (Database)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Database Initialization:
â”œâ”€ create_engine(): Create DB connection engine
â”œâ”€ engine.begin(): Context manager untuk transactions
â”œâ”€ text(): Execute raw SQL with parameters
â””â”€ .fetchone(), .fetchall(): Retrieve query results

Database Operations:
â”œâ”€ CREATE TABLE IF NOT EXISTS: Define schema
â”œâ”€ INSERT INTO: Add new records
â”œâ”€ UPDATE: Modify existing records
â”œâ”€ DELETE: Remove records
â”œâ”€ SELECT: Query data
â””â”€ UNIQUE INDEX: Prevent duplicate entries

Special Features:
â”œâ”€ ON CONFLICT (SQLite3):
â”‚  â””â”€ INSERT ... ON CONFLICT(column) DO UPDATE: Upsert logic
â”œâ”€ PRAGMA journal_mode=WAL: Write-Ahead Logging (better concurrency)
â”œâ”€ PRAGMA busy_timeout: Timeout untuk lock conflicts
â””â”€ sqlite3.connect(): Direct connection with timeout

ğŸ“¦ INSTALOADER (Instagram Scraping)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ instaloader.Instaloader(): Initialize scraper
â€¢ L.context.user_agent: Set user agent (rotate untuk avoid ban)
â€¢ Profile.from_username(context, username): Load profile
â€¢ Profile.get_posts(): Iterate through posts
â€¢ Post attributes:
  â”œâ”€ post.date: Publication datetime
  â”œâ”€ post.caption: Caption text
  â”œâ”€ post.shortcode: Post URL shortcode
  â”œâ”€ post.likes: Like count
  â”œâ”€ post.comments: Comment count
  â”œâ”€ post.is_video: Boolean (video or image)
  â”œâ”€ post.video_view_count: Video view count
  â””â”€ post.get_likes(), post.get_comments(): Detailed engagement

Rate Limiting Handling:
â”œâ”€ Exception handling untuk 401 Unauthorized
â”œâ”€ Exception handling untuk 429 Too Many Requests
â””â”€ Exponential backoff: Wait time = 10s Ã— 2^attempt

ğŸ“¦ XLSXWRITER (Excel Report Generation)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ ExcelWriter: Writer object untuk workbook
â€¢ workbook.add_format(): Create cell format style
â€¢ worksheet.write(): Write cell value with format
â€¢ worksheet.set_column(): Set column width
â€¢ Format attributes:
  â”œâ”€ bold, font_color, bg_color: Text styling
  â”œâ”€ border, align, valign: Cell alignment
  â””â”€ number_format: Currency/percentage formatting

ğŸ“¦ NUMPY (Numerical Computing)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ np.random.uniform(a, b): Random float dalam range [a, b]
â””â”€ Used untuk jitter dalam rate limiting (prevent predictable patterns)

ğŸ“¦ HASHLIB (Password Hashing)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ hashlib.sha256(string): Hash password dengan SHA256
â€¢ .hexdigest(): Return hex string dari hash
â””â”€ Example: hashlib.sha256('admin123'.encode()).hexdigest()

ğŸ“¦ DATETIME (Time Management)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ datetime.now(): Current date & time
â€¢ datetime.timedelta(): Time delta (digunakan untuk TTL cache, rate limit waits)
â€¢ date.strftime(): Format date string (e.g., "%d/%m/%Y")
â””â”€ Used untuk timestamps dan schedule handling

ğŸ“¦ OS & RE (File System & Regex)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ os.path.abspath(): Get absolute file path
â€¢ os.path.exists(): Check file existence
â€¢ re.sub(): Regular expression substitution
â””â”€ clean_txt() menggunakan re.sub(r'[^\x00-\x7f]', '', text) untuk remove non-ASCII


B. CUSTOM CLASSES & FUNCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CLASS: ScrapingCache
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Purpose: Simple in-memory cache dengan  â”‚
â”‚ TTL (Time To Live)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Attributes:                             â”‚
â”‚ â€¢ cache: dict = {key: (value, ts)}     â”‚
â”‚ â€¢ ttl: timedelta object                 â”‚
â”‚                                         â”‚
â”‚ Methods:                                â”‚
â”‚ â€¢ get(key) â†’ value or None             â”‚
â”‚   â””â”€ Return cached value if not expiredâ”‚
â”‚   â””â”€ Delete if expired, return None    â”‚
â”‚                                         â”‚
â”‚ â€¢ set(key, value)                      â”‚
â”‚   â””â”€ Store value dengan timestamp      â”‚
â”‚                                         â”‚
â”‚ â€¢ clear_expired()                      â”‚
â”‚   â””â”€ Remove semua expired entries      â”‚
â”‚                                         â”‚
â”‚ Usage:                                  â”‚
â”‚ scraping_cache = ScrapingCache(60)     â”‚
â”‚ cached = scraping_cache.get(key)       â”‚
â”‚ if cached: return cached               â”‚
â”‚ # ... fetch baru ...                   â”‚
â”‚ scraping_cache.set(key, new_data)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLASS: InstagramRateLimitManager
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Purpose: Manage Instagram rate limits   â”‚
â”‚ dengan exponential backoff               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Attributes:                             â”‚
â”‚ â€¢ last_request_time: dict (usernameâ†’ts)â”‚
â”‚ â€¢ rate_limit_wait_until: dict           â”‚
â”‚ â€¢ min_delay_between_requests: 3 seconds â”‚
â”‚ â€¢ user_agent_list: List user agents     â”‚
â”‚ â€¢ ua_index: Current user agent index    â”‚
â”‚ â€¢ request_count: Total requests made    â”‚
â”‚                                         â”‚
â”‚ Methods:                                â”‚
â”‚ â€¢ get_next_user_agent()                â”‚
â”‚   â””â”€ Rotate ke user agent berikutnya   â”‚
â”‚                                         â”‚
â”‚ â€¢ wait_if_needed(username)              â”‚
â”‚   â””â”€ Check rate limit & enforce delay  â”‚
â”‚   â””â”€ Update last_request_time          â”‚
â”‚                                         â”‚
â”‚ â€¢ mark_rate_limited(username, timeout) â”‚
â”‚   â””â”€ Mark user sebagai rate limited    â”‚
â”‚   â””â”€ Set wait_until ke now + timeout   â”‚
â”‚                                         â”‚
â”‚ â€¢ should_slow_down()                   â”‚
â”‚   â””â”€ Every 10 requests, add extra delayâ”‚
â”‚                                         â”‚
â”‚ Usage:                                  â”‚
â”‚ rate_limit_manager = InstagramRateLimitâ”‚
â”‚ Manager()                               â”‚
â”‚ rate_limit_manager.wait_if_needed(user)â”‚
â”‚ # ... scrape ...                        â”‚
â”‚ if rate_limited: mark_rate_limited()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FUNCTION: init_auth_db()
â”œâ”€ Purpose: Initialize users table & create default admin
â”œâ”€ Schema:
â”‚  â”œâ”€ id [INTEGER PRIMARY KEY AUTOINCREMENT]
â”‚  â”œâ”€ username [TEXT UNIQUE NOT NULL]
â”‚  â”œâ”€ password [TEXT NOT NULL] - SHA256 hash
â”‚  â”œâ”€ role [TEXT DEFAULT 'user']
â”‚  â”œâ”€ unit [TEXT]
â”‚  â””â”€ created_at [TEXT]
â”œâ”€ Default Admin:
â”‚  â”œâ”€ username: 'admin'
â”‚  â”œâ”€ password: SHA256('admin123')
â”‚  â”œâ”€ role: 'admin'
â”‚  â”œâ”€ unit: 'ADMIN'
â”‚  â””â”€ created_at: NOW()
â””â”€ Try/Except: Jika admin sudah ada, skip insertion

FUNCTION: login_user(username, password)
â”œâ”€ Input: username (string), password (string)
â”œâ”€ Process:
â”‚  â”œâ”€ Hash password dengan SHA256
â”‚  â”œâ”€ Query: SELECT id, username, role, unit FROM users
â”‚  â”‚         WHERE username=? AND password=?
â”‚  â””â”€ Return dict atau None
â”œâ”€ Return: {"id": int, "username": str, "role": str, "unit": str} atau None
â””â”€ Error handling: Exception â†’ return None

FUNCTION: verify_password(password)
â”œâ”€ Input: plain text password
â”œâ”€ Process: hashlib.sha256(password.encode()).hexdigest()
â”œâ”€ Output: 64-char hex string (SHA256 hash)
â””â”€ Note: Sama dengan login proses, tapi untuk new password

FUNCTION: register_user(username, password, role='user', unit='')
â”œâ”€ Input: username, password, role, unit
â”œâ”€ Validation:
â”‚  â”œâ”€ Check username uniqueness (UNIQUE constraint)
â”‚  â””â”€ Password already hashed sebelum INSERT
â”œâ”€ SQL: INSERT INTO users (username, password, role, unit, created_at)
â””â”€ Return: True if success, False if username exists or error

FUNCTION: init_db()
â”œâ”€ Purpose: Create schema & migration untuk backward compatibility
â”œâ”€ Tables Created:
â”‚  â”œâ”€ users (sebelumnya init_auth_db)
â”‚  â”œâ”€ daftar_akun_unit
â”‚  â”œâ”€ monitoring_pln
â”‚  â”œâ”€ pengajuan_dokumentasi
â”‚  â””â”€ dokumentasi_calendar
â”œâ”€ Indices:
â”‚  â””â”€ CREATE UNIQUE INDEX ux_monitoring_link ON monitoring_pln(link_pemberitaan)
â”œâ”€ Migrations (ensure_columns):
â”‚  â””â”€ ALTER TABLE ... ADD COLUMN (jika kolom belum ada)
â”‚     â””â”€ Used untuk compatibility dengan versi DB lama
â””â”€ Error handling: Try/Except untuk setiap kolom ADD (prevent duplicate column errors)

FUNCTION: run_scraper(username, unit_name, limit=20, target_month="Semua", kategori_input="Korporat", date_from=None, date_to=None, max_retries=2)
â”œâ”€ Input: Instagram username, unit name, filtering options
â”œâ”€ Process:
â”‚  â”œâ”€ 1. Clean username dengan extract_username()
â”‚  â”œâ”€ 2. Check cache: jika ada & belum expired, return cached
â”‚  â”œâ”€ 3. Rate limit check: wait jika needed
â”‚  â”œâ”€ 4. Initialize Instaloader
â”‚  â”œâ”€ 5. Try to fetch profile (dengan retry & exponential backoff)
â”‚  â”œâ”€ 6. Loop through posts:
â”‚  â”‚    â”œâ”€ Filter by month, date range
â”‚  â”‚    â”œâ”€ Extract: date, caption, shortcode, likes, views
â”‚  â”‚    â”œâ”€ Build dict record
â”‚  â”‚    â”œâ”€ Append ke results
â”‚  â”‚    â”œâ”€ Adaptive delay: 2s base + 1-3s extra every 5 posts
â”‚  â”‚    â””â”€ Handle rate limits per post
â”‚  â”œâ”€ 7. Convert results ke DataFrame
â”‚  â”œâ”€ 8. Cache hasil
â”‚  â””â”€ 9. Return DataFrame
â”œâ”€ Output: pandas.DataFrame dengan columns:
â”‚  â”œâ”€ tanggal, bulan, tahun
â”‚  â”œâ”€ judul_pemberitaan, link_pemberitaan
â”‚  â”œâ”€ platform, tipe_konten
â”‚  â”œâ”€ pic_unit, akun, kategori
â”‚  â”œâ”€ likes, comments, views
â”‚  â”œâ”€ last_updated, source
â”‚  â””â”€ empty DataFrame jika error
â””â”€ Error handling:
   â”œâ”€ "not found" â†’ show error, return empty
   â”œâ”€ Rate limit â†’ mark rate limited, retry with backoff
   â””â”€ Other errors â†’ show error, return empty

FUNCTION: clean_txt(text_input)
â”œâ”€ Input: Any text string
â”œâ”€ Process:
â”‚  â”œâ”€ Return "Konten Visual" jika input kosong
â”‚  â”œâ”€ Remove non-ASCII characters dengan regex
â”‚  â”œâ”€ Replace newlines dengan space
â”‚  â””â”€ Strip whitespace
â”œâ”€ Output: Cleaned text string
â””â”€ Usage: Untuk sanitize captions sebelum simpan ke DB

FUNCTION: extract_username(input_str)
â”œâ”€ Input: Username, @username, atau full IG post URL
â”œâ”€ Process: (regex parsing)
â”‚  â”œâ”€ Jika input kosong â†’ return ""
â”‚  â”œâ”€ Jika contains "/p/" â†’ return as full URL (untuk post scraping)
â”‚  â”œâ”€ Jika contains "instagram.com" â†’ extract username dari path
â”‚  â””â”€ Else â†’ remove @ dan strip whitespace
â”œâ”€ Output: Clean username atau full URL
â””â”€ Example:
   â”œâ”€ Input: "pln_uid" â†’ Output: "pln_uid"
   â”œâ”€ Input: "@pln_uid" â†’ Output: "pln_uid"
   â””â”€ Input: "https://instagram.com/pln_uid/" â†’ Output: "pln_uid"

FUNCTION: get_month_order()
â”œâ”€ Output: List of 12 Indonesian month names
â””â”€ Return: ['Januari', 'Februari', ..., 'Desember']

FUNCTION: parse_date_str(datestr)
â”œâ”€ Input: Date string dalam berbagai format
â”œâ”€ Supported formats:
â”‚  â”œâ”€ "DD/MM/YYYY" (most common dalam sistem)
â”‚  â”œâ”€ "YYYY-MM-DD"
â”‚  â”œâ”€ "YYYY-MM-DD HH:MM:SS"
â”‚  â”œâ”€ "DD-MM-YYYY"
â”‚  â””â”€ Fallback: pandas.to_datetime() dengan dayfirst=True
â”œâ”€ Output: datetime.date object atau None
â””â”€ Usage: Untuk parse berbagai date formats dalam data

FUNCTION: render_month_calendar(year, month, events=None)
â”œâ”€ Input: year, month (integer), events (list of dicts)
â”œâ”€ Process:
â”‚  â”œâ”€ Build calendar grid dengan python.calendar
â”‚  â”œâ”€ Create events_map: {day: [list of events for that day]}
â”‚  â”œâ”€ Generate HTML table dengan:
â”‚  â”‚  â”œâ”€ Header row: day names (Ming-Sab)
â”‚  â”‚  â”œâ”€ Data rows: 7 columns (days)
â”‚  â”‚  â”œâ”€ Empty cells untuk hari dari bulan lain
â”‚  â”‚  â”œâ”€ Event badges (max 2, +X more untuk excess)
â”‚  â”‚  â””â”€ Color coding by status:
â”‚  â”‚     â”œâ”€ pending: ğŸŸ  orange
â”‚  â”‚     â”œâ”€ approved: ğŸŸ¢ green
â”‚  â”‚     â””â”€ done: ğŸ”µ blue
â”‚  â””â”€ Include CSS styling untuk responsive table
â”œâ”€ Output: HTML string (untuk st.markdown())
â””â”€ Usage: Visualisasi jadwal dokumentasi dalam kalender

FUNCTION: apply_date_filter(df)
â”œâ”€ Input: DataFrame dengan column 'tanggal' (DD/MM/YYYY)
â”œâ”€ Process:
â”‚  â”œâ”€ Check session_state['use_date_filter']
â”‚  â”œâ”€ Parse 'tanggal' column ke datetime
â”‚  â”œâ”€ Get date_from & date_to dari session_state
â”‚  â”œâ”€ Filter: df['tanggal_parsed'] >= from AND <= to
â”‚  â””â”€ Drop temporary 'tanggal_parsed' column
â”œâ”€ Output: Filtered DataFrame
â””â”€ Usage: Global date filtering di Rekapitulasi page

FUNCTION: generate_excel_report(df)
â”œâ”€ Input: DataFrame dengan data monitoring
â”œâ”€ Process:
â”‚  â”œâ”€ Create BytesIO buffer
â”‚  â”œâ”€ Initialize ExcelWriter dengan xlsxwriter engine
â”‚  â”œâ”€ Sheet 1: "Data_Detail"
â”‚  â”‚  â”œâ”€ Write all rows & columns
â”‚  â”‚  â”œâ”€ Format header (bold, white, blue background)
â”‚  â”‚  â””â”€ Auto-adjust column width
â”‚  â”‚
â”‚  â”œâ”€ Sheet 2: "Rekapan Tahunan"
â”‚  â”‚  â”œâ”€ For each unique year (sorted descending):
â”‚  â”‚  â”‚  â”œâ”€ Create pivot table: index=pic_unit, columns=bulan, values=count
â”‚  â”‚  â”‚  â”œâ”€ Fill missing months dengan 0
â”‚  â”‚  â”‚  â”œâ”€ Sort months by calendar order
â”‚  â”‚  â”‚  â””â”€ Write to worksheet dengan formatting
â”‚  â”‚  â””â”€ Set column widths
â”‚  â”‚
â”‚  â””â”€ Return: output.getvalue() (binary Excel file)
â”œâ”€ Usage: Download button di Rekapitulasi & Admin Dashboard

FUNCTION: color_rekap_style(val)
â”œâ”€ Input: Numeric value (count)
â”œâ”€ Output: CSS background-color string based on value:
â”‚  â”œâ”€ >= 20: Dark blue background, white text
â”‚  â”œâ”€ >= 10: Medium blue background, white text
â”‚  â”œâ”€ > 0: Light blue background, dark text
â”‚  â””â”€ 0: White background, light gray text
â””â”€ Usage: Style DataFrame cells dalam heatmap visualisasi

FUNCTION: get_nav_for_role(role)
â”œâ”€ Input: role ('admin' atau 'user')
â”œâ”€ Output: List of navigation menu items
â”‚  â”œâ”€ Admin: Dashboard, Rekapitulasi, Sinkronisasi, Input Manual, 
â”‚  â”‚         Dokumentasi, Kalender, Pengaturan Unit, User, Admin
â”‚  â””â”€ User: Dashboard, Kalender, Dokumentasi, Riwayat
â””â”€ Usage: Build navigation menu di header

FUNCTION: safe_rerun()
â”œâ”€ Purpose: Compatibility helper untuk st.rerun()
â”œâ”€ Process:
â”‚  â”œâ”€ Try: st.rerun()
â”‚  â”œâ”€ Except (AttributeError): st.experimental_rerun()
â”‚  â””â”€ Except (Any): st.stop()
â””â”€ Usage: Handle versi Streamlit lama yang belum punya st.rerun()

FUNCTION: render_documentation_links(drive_link, video_link, flyer_link)
â”œâ”€ Input: Three URL strings (bisa None atau empty)
â”œâ”€ Output: HTML div dengan button links (styled dengan inline CSS)
â”œâ”€ Process:
â”‚  â”œâ”€ Check jika semua kosong â†’ return "Dokumentasi belum tersedia"
â”‚  â”œâ”€ Build HTML div dengan flexbox layout
â”‚  â”œâ”€ Conditional rendering setiap link jika ada
â”‚  â””â”€ Styling:
â”‚  â”‚  â”œâ”€ Drive: ğŸ”µ Blue (#0ea5e9)
â”‚  â”‚  â”œâ”€ Video: ğŸŸ  Amber (#f59e0b)
â”‚  â”‚  â””â”€ Flyer: ğŸŸ£ Purple (#8b5cf6)
â”‚  â””â”€ Each link: padding, border-radius, font-weight, hover effect
â”œâ”€ Usage: Render documentation links di Riwayat & Kalender page
â””â”€ Return: HTML string untuk st.markdown()


================================================================================
5. STRUKTUR DATABASE DETAIL
================================================================================

TABLE: users
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    role TEXT DEFAULT 'user',
    unit TEXT,
    created_at TEXT
);

Columns:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name    â”‚ Type   â”‚ Description                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id      â”‚ INT    â”‚ Auto-increment primary key           â”‚
â”‚ usernameâ”‚ TEXT   â”‚ Unique username (email or plain text)â”‚
â”‚ passwordâ”‚ TEXT   â”‚ SHA256 hashed password (64 char hex) â”‚
â”‚ role    â”‚ TEXT   â”‚ 'admin' atau 'user'                  â”‚
â”‚ unit    â”‚ TEXT   â”‚ Department/unit name                 â”‚
â”‚ created_atâ”‚TEXT  â”‚ ISO8601 timestamp (YYYY-MM-DD HH:MM)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Data:
ID â”‚ username â”‚ password (SHA256) â”‚ role  â”‚ unit    â”‚ created_at
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1  â”‚ admin    â”‚ 8c6976e5b5410... â”‚ admin â”‚ ADMIN   â”‚ 2026-01-20 08:00:00
2  â”‚ humas_01 â”‚ 3b64db62e1d73... â”‚ user  â”‚ Humas   â”‚ 2026-01-21 10:30:00
3  â”‚ ops_02   â”‚ 7c4a8d09ca316... â”‚ user  â”‚ Operasi â”‚ 2026-01-22 14:15:00


TABLE: daftar_akun_unit
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE daftar_akun_unit (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nama_unit TEXT,
    username_ig TEXT UNIQUE
);

Columns:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name       â”‚ Type â”‚ Description                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id         â”‚ INT  â”‚ Auto-increment primary key         â”‚
â”‚ nama_unit  â”‚ TEXT â”‚ Department/unit name (e.g., Humas) â”‚
â”‚ username_igâ”‚ TEXT â”‚ Instagram handle (unique, without @)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Data:
ID â”‚ nama_unit  â”‚ username_ig
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1  â”‚ Humas      â”‚ pln_uid_humas
2  â”‚ Operasi    â”‚ pln_uid_operasi
3  â”‚ Komersial  â”‚ pln_uid_komersial
4  â”‚ IT         â”‚ pln_uid_it


TABLE: monitoring_pln (MAIN DATA TABLE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE monitoring_pln (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    tanggal TEXT, bulan TEXT, tahun TEXT,
    judul_pemberitaan TEXT, 
    link_pemberitaan TEXT UNIQUE,
    platform TEXT, tipe_konten TEXT, 
    pic_unit TEXT, 
    akun TEXT,
    kategori TEXT,
    likes INTEGER DEFAULT 0, 
    comments INTEGER DEFAULT 0,
    views INTEGER DEFAULT 0,
    source TEXT DEFAULT 'Scraping',
    source_details TEXT,
    created_by INTEGER, -- FK â†’ users.id (nullable, set when manual input)
    last_updated TEXT
);

Columns (18 total):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name             â”‚ Type   â”‚ Description                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id               â”‚ INT    â”‚ PK, auto-increment            â”‚
â”‚ tanggal          â”‚ TEXT   â”‚ Post date (DD/MM/YYYY format) â”‚
â”‚ bulan            â”‚ TEXT   â”‚ Month name (Januari-Desember) â”‚
â”‚ tahun            â”‚ TEXT   â”‚ Year (YYYY)                   â”‚
â”‚ judul_pemberitaanâ”‚ TEXT   â”‚ Caption (max 500 chars)       â”‚
â”‚ link_pemberitaan â”‚ TEXT   â”‚ Post URL (UNIQUE, prevent dup)â”‚
â”‚ platform         â”‚ TEXT   â”‚ Instagram, YouTube, Facebook..â”‚
â”‚ tipe_konten      â”‚ TEXT   â”‚ Feeds, Reels, Stories, etc.   â”‚
â”‚ pic_unit         â”‚ TEXT   â”‚ Responsible unit              â”‚
â”‚ akun             â”‚ TEXT   â”‚ Account handle (@username)    â”‚
â”‚ kategori         â”‚ TEXT   â”‚ Korporat, Influencer, Kampanyeâ”‚
â”‚ likes            â”‚ INT    â”‚ Like count (default 0)        â”‚
â”‚ comments         â”‚ INT    â”‚ Comment count (default 0)     â”‚
â”‚ views            â”‚ INT    â”‚ View count (default 0)        â”‚
â”‚ source           â”‚ TEXT   â”‚ Scraping or Input Manual      â”‚
â”‚ source_details   â”‚ TEXT   â”‚ Optional notes for manual inputâ”‚
â”‚ created_by       â”‚ INT    â”‚ FK â†’ users.id (nullable)      â”‚
â”‚ last_updated     â”‚ TEXT   â”‚ ISO8601 timestamp (update)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Indices:
â”œâ”€ PRIMARY KEY: id
â””â”€ UNIQUE INDEX ux_monitoring_link: ON (link_pemberitaan)
   â””â”€ Prevent duplicate posts

Example Data:
ID â”‚ tanggal   â”‚ bulan    â”‚ tahun â”‚ judul... â”‚ link... â”‚ platform â”‚ unit
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€
1  â”‚ 15/01/2026â”‚ Januari  â”‚ 2026  â”‚ "Kegiatanâ”‚ https://â”‚ Instagramâ”‚ Humas
   â”‚           â”‚          â”‚       â”‚ PLN..." â”‚ instagram.â”‚          â”‚
   â”‚           â”‚          â”‚       â”‚         â”‚ com/p/..â”‚          â”‚


TABLE: input_manual_log (MANUAL INPUT AUDIT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE input_manual_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,             -- FK â†’ users.id (who input)
    monitoring_id INTEGER,       -- FK â†’ monitoring_pln.id (nullable)
    tanggal_input TEXT,          -- timestamp saat input
    sumber_detail TEXT,          -- deskripsi / cara input (contoh: 'admin form')
    notes TEXT,
    created_at TEXT
);

Purpose:
â”œâ”€ Menyimpan jejak (audit) setiap input manual ke monitoring_pln
â”œâ”€ Mempermudah Pelacakan sumber input dan alasan perubahan
â””â”€ Berguna untuk admin audit dan rollback manual jika perlu

Example Data:
ID â”‚ user_id â”‚ monitoring_id â”‚ tanggal_input       â”‚ sumber_detail
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1  â”‚ 1       â”‚ 5             â”‚ 2026-01-31 09:15:00 â”‚ "Input manual via form"


TABLE: pengajuan_dokumentasi (REQUEST)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE pengajuan_dokumentasi (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nama_pengaju TEXT,
    user_id INTEGER,
    nomor_telpon TEXT,
    unit TEXT,
    tanggal_acara TEXT,
    jam_mulai TEXT,
    jam_selesai TEXT,
    output_link_drive TEXT,
    output_type TEXT,
    biaya REAL DEFAULT 0,
    deadline_penyelesaian TEXT,
    status TEXT DEFAULT 'pending',
    hasil_link_drive TEXT,
    hasil_video TEXT,
    hasil_flyer TEXT,
    rejection_reason TEXT,
    added_to_calendar INTEGER DEFAULT 0,
    created_at TEXT,
    updated_at TEXT,
    notes TEXT
);

Columns (20 total):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name                 â”‚ Type   â”‚ Description              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ INT    â”‚ PK, auto-increment       â”‚
â”‚ nama_pengaju         â”‚ TEXT   â”‚ Requester name           â”‚
â”‚ user_id              â”‚ INT    â”‚ FK â†’ users.id            â”‚
â”‚ nomor_telpon         â”‚ TEXT   â”‚ WhatsApp number          â”‚
â”‚ unit                 â”‚ TEXT   â”‚ Unit requesting docs     â”‚
â”‚ tanggal_acara        â”‚ TEXT   â”‚ Event date (DD/MM/YYYY)  â”‚
â”‚ jam_mulai            â”‚ TEXT   â”‚ Start time (HH:MM)       â”‚
â”‚ jam_selesai          â”‚ TEXT   â”‚ End time (HH:MM)         â”‚
â”‚ output_link_drive    â”‚ TEXT   â”‚ Reference drive link     â”‚
â”‚ output_type          â”‚ TEXT   â”‚ Foto, Video, Both, etc.  â”‚
â”‚ biaya                â”‚ REAL   â”‚ Cost estimate            â”‚
â”‚ deadline_penyelesaianâ”‚ TEXT   â”‚ Delivery deadline        â”‚
â”‚ status               â”‚ TEXT   â”‚ pending/approved/done/...â”‚
â”‚ hasil_link_drive     â”‚ TEXT   â”‚ Final drive link (output)â”‚
â”‚ hasil_video          â”‚ TEXT   â”‚ Final video link         â”‚
â”‚ hasil_flyer          â”‚ TEXT   â”‚ Final flyer/poster link  â”‚
â”‚ rejection_reason     â”‚ TEXT   â”‚ Why rejected (if status) â”‚
â”‚ added_to_calendar    â”‚ INT    â”‚ Boolean (0/1)            â”‚
â”‚ created_at           â”‚ TEXT   â”‚ Creation timestamp       â”‚
â”‚ updated_at           â”‚ TEXT   â”‚ Last update timestamp    â”‚
â”‚ notes                â”‚ TEXT   â”‚ Special instructions     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status Values:
â”œâ”€ pending: Menunggu review admin
â”œâ”€ approved: Admin setuju, dokumentasi dimulai
â”œâ”€ done: Dokumentasi selesai, hasil sudah tersedia
â””â”€ rejected: Admin tolak dengan alasan

Example Data:
ID â”‚ nama_pengaju â”‚ user_id â”‚ unit â”‚ status    â”‚ hasil_link_drive
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1  â”‚ Budi Santoso â”‚ 2       â”‚ Humasâ”‚ done      â”‚ https://drive...
2  â”‚ Rina Wijaya  â”‚ 3       â”‚ Ops  â”‚ approved  â”‚ NULL


TABLE: dokumentasi_calendar (SCHEDULING)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATE TABLE dokumentasi_calendar (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    pengajuan_id INTEGER, -- FK â†’ pengajuan_dokumentasi.id (nullable when ad-hoc event)
    created_by INTEGER,   -- FK â†’ users.id (who created this event, optional)
    tanggal TEXT,
    nama_kegiatan TEXT,
    unit TEXT,
    status TEXT,
    doc_link TEXT,
    created_at TEXT
);

Columns (9 total):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name        â”‚ Type   â”‚ Description                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚ INT    â”‚ PK, auto-increment                         â”‚
â”‚ pengajuan_idâ”‚ INT    â”‚ FK â†’ pengajuan_dokumentasi.id (nullable)   â”‚
â”‚ created_by  â”‚ INT    â”‚ FK â†’ users.id (nullable, creator of event) â”‚
â”‚ tanggal     â”‚ TEXT   â”‚ Event date (DD/MM/YYYY)                    â”‚
â”‚ nama_kegiatanâ”‚TEXT   â”‚ Activity name                              â”‚
â”‚ unit        â”‚ TEXT   â”‚ Responsible unit                           â”‚
â”‚ status      â”‚ TEXT   â”‚ pending/approved/done                      â”‚
â”‚ doc_link    â”‚ TEXT   â”‚ Final documentation link                   â”‚
â”‚ created_at  â”‚ TEXT   â”‚ Creation timestamp                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Purpose:
â”œâ”€ Can map 1-to-1 dengan pengajuan_dokumentasi jika event berasal dari pengajuan
â”œâ”€ Also supports ad-hoc events created directly by admin (created_by != NULL, pengajuan_id NULL)
â”œâ”€ Used for calendar visualization
â””â”€ Track status changes sesuai approval flow

Example Data:
ID â”‚ pengajuan_id â”‚ tanggal    â”‚ nama_kegiatan     â”‚ status
â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
1  â”‚ 1            â”‚ 15/01/2026 â”‚ Rapat Direksi     â”‚ done
2  â”‚ 2            â”‚ 20/01/2026 â”‚ Sosialisasi PLTS  â”‚ approved


================================================================================
6. OPERASI DATABASE (CRUD, RESET, MIGRASI)
================================================================================

A. CREATE (INSERT) OPERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INSERT: Tambah Data Monitoring Baru (via Scraping)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSERT INTO monitoring_pln (
    tanggal, bulan, tahun, judul_pemberitaan, link_pemberitaan,
    platform, tipe_konten, pic_unit, akun, kategori,
    likes, comments, views, source, last_updated
)
VALUES (
    '15/01/2026', 'Januari', '2026', 'Caption dari post', 'https://...',
    'Instagram', 'Feeds', 'Humas', '@pln_uid_humas', 'Korporat',
    150, 25, 5000, 'Scraping', '2026-01-31 14:30:00'
);

Alternative (ON CONFLICT untuk Upsert):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSERT INTO monitoring_pln (...)
VALUES (...)
ON CONFLICT(link_pemberitaan) DO UPDATE SET
    likes=excluded.likes,
    comments=excluded.comments,
    views=excluded.views,
    last_updated=excluded.last_updated;

INSERT: Tambah Pengajuan Dokumentasi (via User Form)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSERT INTO pengajuan_dokumentasi (
    nama_pengaju, user_id, nomor_telpon, unit,
    tanggal_acara, jam_mulai, jam_selesai,
    output_link_drive, output_type, biaya,
    status, created_at, updated_at, notes
)
VALUES (
    'Budi Santoso', 2, '082123456789', 'Humas',
    '15/01/2026', '08:00', '10:00',
    'https://drive.example/ref', 'Foto & Video', 500000,
    'pending', '2026-01-31 10:00:00', '2026-01-31 10:00:00',
    'Dokumentasi rapat direksi'
);

INSERT: Tambah Event Kalender (via Pengajuan)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSERT INTO dokumentasi_calendar (
    pengajuan_id, tanggal, nama_kegiatan, unit, status, created_at
)
VALUES (
    1, '15/01/2026', 'Rapat Direksi', 'Humas', 'pending', '2026-01-31 10:00:00'
);

INSERT: Registrasi User Baru
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSERT INTO users (username, password, role, unit, created_at)
VALUES (
    'user_baru', '...(SHA256 hash)...', 'user', 'Komersial', '2026-01-31 12:00:00'
);


B. READ (SELECT) OPERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SELECT: All monitoring data
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT * FROM monitoring_pln
WHERE tahun = '2026'
ORDER BY tanggal DESC
LIMIT 100;

SELECT: Filtered monitoring dengan aggregation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT pic_unit, bulan, COUNT(*) as jumlah_post, 
       SUM(likes) as total_likes, SUM(views) as total_views
FROM monitoring_pln
WHERE tahun = '2026'
GROUP BY pic_unit, bulan
ORDER BY pic_unit, bulan;

SELECT: Top accounts by engagement
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT akun, pic_unit, 
       COUNT(*) as post_count,
       SUM(likes) as total_likes,
       AVG(views) as avg_views
FROM monitoring_pln
GROUP BY akun, pic_unit
ORDER BY total_likes DESC
LIMIT 10;

SELECT: Pengajuan dengan filter
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT id, nama_pengaju, unit, tanggal_acara, status, biaya
FROM pengajuan_dokumentasi
WHERE status = 'pending' OR status = 'approved'
ORDER BY created_at DESC;

SELECT: Login verification
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT id, username, role, unit
FROM users
WHERE username = ? AND password = ?;
-- Parameters: (username_input, sha256_hash_password)

SELECT: Kalender events untuk bulan tertentu
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SELECT id, pengajuan_id, tanggal, nama_kegiatan, unit, status
FROM dokumentasi_calendar
WHERE SUBSTR(tanggal, 7, 4) = '2026' 
  AND SUBSTR(tanggal, 4, 2) = '01'
ORDER BY tanggal ASC;


C. UPDATE (MODIFY) OPERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

UPDATE: Admin approve pengajuan
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE pengajuan_dokumentasi
SET status = 'approved'
WHERE id = ?;

UPDATE dokumentasi_calendar
SET status = 'approved'
WHERE pengajuan_id = ?;

UPDATE: Admin reject pengajuan dengan alasan
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE pengajuan_dokumentasi
SET status = 'rejected', 
    rejection_reason = 'Data tidak lengkap, silahkan revisi...'
WHERE id = ?;

UPDATE: Admin input hasil dokumentasi
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE pengajuan_dokumentasi
SET hasil_link_drive = 'https://drive.google.com/...',
    hasil_video = 'https://youtube.com/...',
    hasil_flyer = 'https://drive.google.com/...',
    updated_at = '2026-02-01 15:30:00'
WHERE id = ?;

UPDATE: Mark dokumentasi selesai
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE pengajuan_dokumentasi
SET status = 'done'
WHERE id = ?;

UPDATE dokumentasi_calendar
SET status = 'done'
WHERE pengajuan_id = ?;

UPDATE: Update engagement metrics (dari scraping)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE monitoring_pln
SET likes = ?, comments = ?, views = ?, last_updated = ?
WHERE link_pemberitaan = ?;

UPDATE: Change user password (admin action)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE users
SET password = ? -- SHA256 hash
WHERE username = ? OR id = ?;

UPDATE: Edit monitoring data (via Data Editor)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

UPDATE monitoring_pln
SET tanggal = ?, bulan = ?, tahun = ?,
    judul_pemberitaan = ?, kategori = ?,
    likes = ?, comments = ?, views = ?,
    last_updated = ?
WHERE link_pemberitaan = ?
  AND (id = ? OR link_pemberitaan = ?);


D. DELETE (REMOVE) OPERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DELETE: Hapus monitoring record (admin action)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM monitoring_pln
WHERE id = ? OR link_pemberitaan = ?;

DELETE: Hapus pengajuan dokumentasi (cascade)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM pengajuan_dokumentasi WHERE id = ?;
DELETE FROM dokumentasi_calendar WHERE pengajuan_id = ?;

DELETE: Bulk delete monitoring data (masa tertentu)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM monitoring_pln
WHERE tahun = '2025'
  OR (tahun = '2026' AND bulan IN ('Januari', 'Februari'));


E. DATABASE BACKUP & RESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BACKUP: Manual file copy (simplest method)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Windows PowerShell
Copy-Item "PLN_Ultimate_Monitoring_V7.db" -Destination "backup/PLN_Ultimate_Monitoring_V7_$(Get-Date -Format yyyyMMdd_HHmmss).db"

# Linux/Mac
cp PLN_Ultimate_Monitoring_V7.db backup/PLN_Ultimate_Monitoring_V7_$(date +%Y%m%d_%H%M%S).db

BACKUP: SQL dump
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# SQLite3 command line
sqlite3 PLN_Ultimate_Monitoring_V7.db ".dump" > backup_dump.sql

# Python dengan sqlite3
import sqlite3
conn = sqlite3.connect('PLN_Ultimate_Monitoring_V7.db')
with open('backup.sql', 'w') as f:
    for line in conn.iterdump():
        f.write(f'{line}\n')
conn.close()

RESTORE: From SQL dump
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Command line
sqlite3 PLN_Ultimate_Monitoring_V7_new.db < backup_dump.sql

# Python
import sqlite3
conn = sqlite3.connect('PLN_Ultimate_Monitoring_V7_restore.db')
with open('backup.sql', 'r') as f:
    conn.executescript(f.read())
conn.commit()
conn.close()


F. DATABASE RESET & CLEANUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESET: Clear all monitoring data (keep tables)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM monitoring_pln;
DELETE FROM sqlite_sequence WHERE name='monitoring_pln';

RESET: Clear all dokumentasi requests
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM dokumentasi_calendar;
DELETE FROM pengajuan_dokumentasi;
DELETE FROM sqlite_sequence WHERE name='dokumentasi_calendar';
DELETE FROM sqlite_sequence WHERE name='pengajuan_dokumentasi';

RESET: Clear all users (except default admin)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM users WHERE username != 'admin';
DELETE FROM sqlite_sequence WHERE name='users';

RESET: Complete database reset (fresh start)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE FROM monitoring_pln;
DELETE FROM pengajuan_dokumentasi;
DELETE FROM dokumentasi_calendar;
DELETE FROM daftar_akun_unit;
DELETE FROM users WHERE username != 'admin';

-- Reset auto-increment counters
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES ('users', 1);
INSERT INTO sqlite_sequence VALUES ('monitoring_pln', 0);
INSERT INTO sqlite_sequence VALUES ('pengajuan_dokumentasi', 0);
INSERT INTO sqlite_sequence VALUES ('dokumentasi_calendar', 0);


G. VACUUM & OPTIMIZE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VACUUM (Reclaim space after delete)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PRAGMA journal_mode=DELETE;  -- Switch to standard journaling
VACUUM;                       -- Compact database file
PRAGMA journal_mode=WAL;      -- Switch back to WAL for better concurrency

ANALYZE (Update statistics)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ANALYZE;  -- Gather statistics for query optimization


H. MIGRATION & SCHEMA UPDATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ADD COLUMN: Add new field ke table existing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ALTER TABLE monitoring_pln ADD COLUMN tipe_konten TEXT DEFAULT 'Feeds';
ALTER TABLE pengajuan_dokumentasi ADD COLUMN hasil_flyer TEXT;

RENAME COLUMN: Change column name
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

-- SQLite3 doesn't support direct RENAME COLUMN before v3.25
-- Workaround: Create new table, copy data, drop old, rename

CREATE TABLE monitoring_pln_new (
    id INTEGER PRIMARY KEY,
    tanggal TEXT,
    bulan_baru TEXT,  -- renamed from 'bulan'
    ... other columns ...
);

INSERT INTO monitoring_pln_new 
SELECT id, tanggal, bulan, ... FROM monitoring_pln;

DROP TABLE monitoring_pln;
ALTER TABLE monitoring_pln_new RENAME TO monitoring_pln;

CREATE INDEX: Speed up queries
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CREATE UNIQUE INDEX idx_monitoring_link 
ON monitoring_pln(link_pemberitaan);

CREATE INDEX idx_pengajuan_user 
ON pengajuan_dokumentasi(user_id);

CREATE INDEX idx_pengajuan_status 
ON pengajuan_dokumentasi(status);

CREATE INDEX idx_calendar_tanggal 
ON dokumentasi_calendar(tanggal);


================================================================================
7. GUIDE PENGGUNAAN SISTEM
================================================================================

A. MEMULAI APLIKASI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Requirement:
â”œâ”€ Python 3.8+
â”œâ”€ pip (package manager)
â””â”€ SQLite3 (built-in dengan Python)

Installation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Clone/Download project:
   git clone <repo_url>
   cd humasplnuidlampung

2. Install dependencies:
   pip install -r requirements.txt

3. Run aplikasi:
   python -m streamlit run main.py

4. Browser otomatis buka: http://localhost:8501

Troubleshooting:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ "ModuleNotFoundError: No module named 'streamlit'":
  â†’ pip install streamlit
  â†’ pip install -r requirements.txt

â€¢ Database file tidak ditemukan:
  â†’ Aplikasi otomatis create di folder root
  â†’ Pastikan folder punya write permission

â€¢ Port 8501 sudah digunakan:
  â†’ streamlit run main.py --server.port 8502


B. LOGIN & ROLE MANAGEMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEFAULT CREDENTIALS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Username: admin
Password: admin123

First Login Steps:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Buka http://localhost:8501
2. Masukkan username & password
3. System otomatis detect role (admin/user)
4. Redirect ke Dashboard sesuai role

Create New User (Admin Only):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Belum tersedia di UI â†’ Manual INSERT atau User self-register
2. Self-registration (via Login Page):
   â”œâ”€ Click "ğŸ“ DAFTAR" tab
   â”œâ”€ Isi: Username, Password (min 6 char), Konfirmasi, Unit
   â”œâ”€ Click "DAFTAR SEKARANG"
   â””â”€ Automatis dibuat dengan role='user'

Manual Create User (via DB):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

import hashlib
username = "user_baru"
password = "pass123"
hashed = hashlib.sha256(password.encode()).hexdigest()

# SQL:
INSERT INTO users (username, password, role, unit, created_at)
VALUES ('user_baru', '{hashed}', 'user', 'Humas', datetime('now'));

Change Password (Admin Script):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Gunakan: scripts/set_admin_pass.py
â”€ Edit script: new_password = 'new_pass_here'
â”€ Run: python scripts/set_admin_pass.py


C. FEATURE WALKTHROUGH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. DASHBOARD (Admin)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Menampilkan:
â”œâ”€ Metrics: Total Posts, Likes, Views, Pengajuan, Unit Aktif
â”œâ”€ Charts:
â”‚  â”œâ”€ Area Chart: Tren publikasi bulanan
â”‚  â”œâ”€ Bar Chart: Top 5 unit kerja
â”‚  â””â”€ Progress: Status dokumentasi (done/approved/pending)
â”œâ”€ Tabs:
â”‚  â”œâ”€ Top Akun Sosmed (rank by post count)
â”‚  â”œâ”€ Pengajuan Terbaru (10 terbaru)
â”‚  â””â”€ Rekap Biaya Unit (total biaya per unit)

Action:
â””â”€ Data read-only, navigate ke menu lain untuk edit


2. REKAPITULASI MONITORING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Features:
â”œâ”€ Smart Filtering:
â”‚  â”œâ”€ Kata kunci (search caption)
â”‚  â”œâ”€ Unit kerja dropdown
â”‚  â”œâ”€ Akun dropdown
â”‚  â”œâ”€ Kategori (Semua/Korporat/Influencer)
â”‚  â””â”€ Sumber data (Scraping/Input Manual)
â”œâ”€ Heatmap Visualization:
â”‚  â”œâ”€ Pivot table: Unit Ã— Bulan
â”‚  â”œâ”€ Gradient coloring (light to dark = low to high)
â”‚  â””â”€ Per-tahun tabs
â”œâ”€ Database Editor:
â”‚  â”œâ”€ Double-click cell untuk edit
â”‚  â”œâ”€ Dropdown untuk field tertentu (bulan, kategori, platform)
â”‚  â”œâ”€ Edit link-pemberitaan, likes, comments, views
â”‚  â””â”€ Delete row dengan keyboard
â”œâ”€ Actions:
â”‚  â”œâ”€ Download Excel (formatted report)
â”‚  â””â”€ Simpan ke database (upsert logic)

Example Workflow:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Filter: Unit = Humas, Kategori = Korporat
2. Lihat heatmap
3. Double-click like count di table
4. Edit value (e.g., 150 â†’ 180)
5. Click "ğŸ’¾ SIMPAN KE DATABASE"
6. Refresh & verify perubahan


3. SINKRONISASI DATA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Purpose: Automasi scraping dari Instagram

Mode:
â”œâ”€ Semua Akun Terdaftar: Scrape semua akun di daftar_akun_unit
â”œâ”€ Pilih Akun Unit Spesifik: Checkbox select multiple
â””â”€ Input Manual Username Influencer: Type username + select unit

Configuration:
â”œâ”€ Filter Bulan (default "Semua")
â”œâ”€ Limit Post (default 10, max 100)
â”œâ”€ Mode Periode:
â”‚  â”œâ”€ Semua Waktu: Scrape all posts
â”‚  â””â”€ Custom Range: Set from-to date

Process:
â”œâ”€ Check cache â†’ return jika ada (TTL 1 jam)
â”œâ”€ Check rate limit â†’ wait jika needed
â”œâ”€ Scrape dengan retry logic & exponential backoff
â”œâ”€ Insert/update ke database dengan ON CONFLICT
â”œâ”€ Progress bar real-time
â””â”€ Summary: "Inserted=X, Updated=Y"

Rate Limit Handling:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Automatic detection dari Instagram (401, 429, "Please wait")
â€¢ Exponential backoff: 10s, 20s, 40s, ...
â€¢ Max retry: 2 attempts (sesuaikan di parameter)
â€¢ Mark account sebagai rate-limited (15 min timeout)
â€¢ Resume scraping jika ada attempt lain


4. INPUT MANUAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Purpose: Entry data monitoring tanpa scraping

Form Fields:
â”œâ”€ Jenis Konten radio: Korporat / Influencer
â”œâ”€ Tanggal Konten (date picker)
â”œâ”€ Platform dropdown: Instagram, YouTube, Facebook, TikTok, Twitter, Media Cetak, Berita
â”œâ”€ Caption / Judul Konten (text area)
â”œâ”€ Link URL (optional, auto-generated jika kosong)
â”œâ”€ Unit Kerja dropdown
â”œâ”€ Nama Akun (e.g., @pln_uid_humas)
â”œâ”€ Tipe Konten dropdown: Feeds, Reels, Postingan
â”œâ”€ Statistik: Likes, Comments, Views (number input)
â””â”€ Button: "ğŸ’¾ SIMPAN KE DATABASE"

Validasi:
â”œâ”€ Unit & Akun required
â”œâ”€ Link optional (auto-generated dengan timestamp jika kosong)
â””â”€ Handle duplicate link: append suffix untuk prevent conflict

Example Entry:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Tipe: Korporat
â€¢ Tanggal: 31 Januari 2026
â€¢ Platform: Instagram
â€¢ Caption: "Sosialisasi PLTS di Kabupaten Lampung"
â€¢ Link: (kosong, auto-generate)
â€¢ Unit: Humas
â€¢ Akun: @pln_uid_humas
â€¢ Tipe Konten: Feeds
â€¢ Likes: 250, Comments: 45, Views: 3500
â†’ Simpan â†’ âœ… Success

DB ACTION (behaviour):
â”œâ”€ System validates link uniqueness (if link present) â†’ if conflict, append suffix or return error based on setting
â”œâ”€ INSERT INTO monitoring_pln with source='Input Manual', source_details='Input Manual Form', created_by=current_user, last_updated=NOW()
â”œâ”€ After insert, CREATE input_manual_log (user_id=current_user, monitoring_id=inserted_id, tanggal_input=NOW(), sumber_detail='manual form')
â””â”€ Optional: Prompt to add event to calendar (Insert into dokumentasi_calendar with created_by=current_user)

Note: Input Manual entries are counted in Rekapitulasi & Dashboard metrics the same as scraped data (source marked as 'Input Manual').


5. PUSAT KENDALI DOKUMENTASI (Admin)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Purpose: Review & approve dokumentasi requests

Filter Panel:
â”œâ”€ Status dropdown: Semua / pending / approved / done / rejected
â”œâ”€ Unit dropdown filter
â”œâ”€ Keyword search (cari nama kegiatan / pengaju)

Pengajuan Card untuk setiap request:
â”œâ”€ Header: ID, Nama Pengaju, Status Badge
â”œâ”€ Info Dasar: Unit, Nama, WhatsApp, Biaya
â”œâ”€ Jadwal: Tanggal Acara, Waktu, Deadline
â”œâ”€ Form Input Hasil (jika approved/done):
â”‚  â”œâ”€ Link Drive (ğŸ“)
â”‚  â”œâ”€ Link Video (ğŸ¬)
â”‚  â”œâ”€ Link Flyer (ğŸ“¸)
â”‚  â””â”€ Button: "ğŸ’¾ SIMPAN"
â””â”€ Action Buttons:
   â”œâ”€ IF pending: "âœ… SETUJUI", "âŒ TOLAK"
   â”œâ”€ IF approved: "ğŸ SELESAIKAN"
   â””â”€ Always: "ğŸ—‘ï¸ HAPUS"

Workflow:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

Status: PENDING
â”œâ”€ Admin review request
â”œâ”€ Click "âœ… SETUJUI" â†’ status = approved
â”‚  â””â”€ Dokumentasi bisa dimulai
â””â”€ OR Click "âŒ TOLAK" â†’ show modal "Alasan Penolakan?"
   â””â”€ Input reason â†’ status = rejected (data dikunci)

Status: APPROVED
â”œâ”€ Dokumentasi in-progress
â”œâ”€ Admin input hasil links (Drive, Video, Flyer)
â”œâ”€ Click "ğŸ’¾ SIMPAN"
â””â”€ Click "ğŸ SELESAIKAN" â†’ status = done (final)

Status: DONE
â”œâ”€ Links tersedia untuk user
â””â”€ Final state

Status: REJECTED
â”œâ”€ Card tampil dengan warning badge
â”œâ”€ Rejection reason ditampilkan
â””â”€ Data read-only (tidak bisa edit)


6. KALENDER DOKUMENTASI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Purpose: Visualisasi jadwal kegiatan dalam calendar grid

Controls:
â”œâ”€ Tahun dropdown (default current year)
â”œâ”€ Bulan dropdown (default current month)
â””â”€ Auto-query dokumentasi_calendar untuk periode

Display:
â”œâ”€ HTML table calendar (7 kolom = hari)
â”œâ”€ Header: Sun-Sat (Indonesian: Ming-Sab)
â”œâ”€ Day cell:
â”‚  â”œâ”€ Day number (bold)
â”‚  â”œâ”€ Event badges (max 2 shown)
â”‚  â”œâ”€ Color by status:
â”‚  â”‚  â”œâ”€ pending: ğŸŸ  orange
â”‚  â”‚  â”œâ”€ approved: ğŸŸ¢ green
â”‚  â”‚  â””â”€ done: ğŸ”µ blue
â”‚  â”œâ”€ "+X lainnya" jika > 2 events
â”‚  â””â”€ Hover: Show full event name
â””â”€ Empty cells untuk hari lain

Interactivity:
â”œâ”€ Click event badge â†’ show full details (optional popup)
â”œâ”€ Hover cell â†’ highlight row/column
â””â”€ Change tahun/bulan â†’ auto-reload


7. MANAJEMEN USER (Admin Only)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Features (TBD):
â”œâ”€ User list dengan role & unit
â”œâ”€ Create new user (form)
â”œâ”€ Edit user (change role, unit, status)
â”œâ”€ Reset password (send link atau direct)
â”œâ”€ Delete user (with confirmation)
â””â”€ Activity log (siapa login kapan)


D. DATA EXPORT & REPORTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPORT: Download Excel Report
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Location: Rekapitulasi Monitoring page
Action: Click "ğŸ“¥ DOWNLOAD EXCEL" button

Output File Structure:
â”œâ”€ Sheet 1: "Data_Detail"
â”‚  â”œâ”€ All columns dari filtered monitoring_pln
â”‚  â”œâ”€ Header: Blue background, white text, bold
â”‚  â”œâ”€ Row count: sesuai filter
â”‚  â””â”€ Column width: Auto (18 char)
â”‚
â””â”€ Sheet 2: "Rekapan Tahunan"
   â”œâ”€ For each year (descending):
   â”‚  â”œâ”€ Year title (14pt, blue, underlined)
   â”‚  â”œâ”€ Pivot table: Unit Ã— Bulan
   â”‚  â”œâ”€ Values: Count of posts
   â”‚  â”œâ”€ Gradient: Light-Blue (0) â†’ Dark-Blue (high)
   â”‚  â”œâ”€ Column widths: Unit=30ch, Months=12ch
   â”‚  â””â”€ Spacing: 3 rows between years
   â””â”€ Filename: Rekap_PLN_DDMMYY.xlsx

Format:
â”œâ”€ Bold header row
â”œâ”€ Numbered rows (index column hidden)
â”œâ”€ Number formatting: 1000 separator
â””â”€ Freeze header row (optional)


================================================================================
8. TROUBLESHOOTING & FAQ
================================================================================

Q1: "ModuleNotFoundError: No module named 'streamlit'"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Install missing dependencies:
   pip install -r requirements.txt
   
   Jika masih error:
   pip install streamlit pandas sqlalchemy instaloader xlsxwriter numpy

Q2: "Database file not found" / Database error
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Aplikasi otomatis create DB file di root folder.
   
   Checklist:
   âœ“ Folder punya write permission
   âœ“ Delete *.db-shm & *.db-wal (WAL temporary files)
   âœ“ Restart aplikasi: Ctrl+C â†’ python -m streamlit run main.py

Q3: "Rate limited" / Instagram scraping tidak bekerja
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Kamu di-rate limit oleh Instagram.
   
   Solutions:
   âœ“ Tunggu 15-30 menit (check limit status di sistem)
   âœ“ Gunakan akun Instagram berbeda (rotate akun)
   âœ“ Kurangi limit post (dari 20 â†’ 10)
   âœ“ Scrape bulan spesifik (tidak semua bulan sekaligus)
   âœ“ Check: Apakah IP/device sudah suspicious? (Instagram policy)

Q4: "Username not found" during login
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Username tidak ada atau password salah.
   
   Solutions:
   âœ“ Check capitalization (case-sensitive)
   âœ“ Self-register user (ğŸ“ DAFTAR tab)
   âœ“ Admin create user (manual SQL atau admin panel)
   âœ“ Default: admin / admin123

Q5: Excel download tidak berfungsi
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Masalah pandas atau xlsxwriter.
   
   Solutions:
   âœ“ pip install xlsxwriter --upgrade
   âœ“ pip install pandas --upgrade
   âœ“ Try different filter (maybe data is empty?)
   âœ“ Check browser download folder permissions

Q6: Calendar tidak menampilkan events
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Kemungkinan: filter tahun/bulan tidak sesuai, atau data kosong.
   
   Debug:
   âœ“ Lihat pengajuan sudah ada? (Pusat Kendali Dokumentasi)
   âœ“ Check tanggal format DD/MM/YYYY
   âœ“ Tahun & bulan picker sesuai pengajuan?
   âœ“ Manual query: SELECT * FROM dokumentasi_calendar

Q7: Pengguna tidak bisa lihat hasil dokumentasi
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Admin belum input link hasil atau status belum 'done'.
   
   Checklist:
   âœ“ Admin set status = 'approved'
   âœ“ Admin input hasil_link_drive, hasil_video, hasil_flyer
   âœ“ Admin click "ğŸ’¾ SIMPAN"
   âœ“ Status berubah ke 'done' (jika selesai)
   âœ“ User login ulang untuk refresh

Q8: Scraping super lambat / banyak timeout
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Instagram lagi strict atau koneksi lambat.
   
   Solutions:
   âœ“ Check internet speed (ping, tracert)
   âœ“ Use VPN (jika IP di-block Instagram)
   âœ“ Reduce limit: 20 â†’ 5 posts
   âœ“ Scrape 1 akun only (test)
   âœ“ Time-of-day: Scrape pada jam low-traffic (e.g., middle night)

Q9: "UNIQUE constraint failed: link_pemberitaan"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Post link sudah ada di database.
   
   Solutions:
   âœ“ Sudah di-scrape sebelumnya
   âœ“ ON CONFLICT logic akan update (bukan insert)
   âœ“ Jika manual input: link auto-generated dengan unique suffix
   âœ“ Clear cache jika perlu (session_state clear)

Q10: Data tidak muncul di Dashboard setelah insert
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A: Need refresh/rerun untuk update.
   
   Solutions:
   âœ“ Manual click button refresh (st.button('ğŸ”„ Refresh'))
   âœ“ Auto: Streamlit re-run setelah form submit
   âœ“ Check DB punya data: Query manual SELECT COUNT(*)
   âœ“ WAL checkpoint: db-shm, db-wal file issues â†’ delete & restart


PERFORMANCE OPTIMIZATION TIPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Cache Data:
   â”œâ”€ Scraping results cached 1 hour (TTL)
   â”œâ”€ Use st.cache_data untuk expensive queries
   â””â”€ Clear cache jika perlu: st.cache_data.clear()

2. Database Indices:
   â”œâ”€ UNIQUE INDEX pada link_pemberitaan (prevent duplicates)
   â”œâ”€ Create index pada frequently-queried columns:
   â”‚  â”œâ”€ monitoring_pln(pic_unit)
   â”‚  â”œâ”€ monitoring_pln(bulan, tahun)
   â”‚  â”œâ”€ pengajuan_dokumentasi(user_id)
   â”‚  â””â”€ pengajuan_dokumentasi(status)
   â””â”€ Run: CREATE INDEX idx_name ON table(column)

3. WAL Mode:
   â”œâ”€ Better concurrency (multiple readers)
   â”œâ”€ Set di: get_db_connection() atau init_db()
   â”œâ”€ PRAGMA journal_mode=WAL
   â””â”€ Keep checkpoint healthy

4. Limit Query Results:
   â”œâ”€ Use LIMIT clause untuk large tables
   â”œâ”€ Pagination untuk 1000+ rows
   â””â”€ Filter sebelum SELECT *

5. Monitor Database Size:
   â”œâ”€ Check file size: ls -lh *.db
   â”œâ”€ Run VACUUM untuk reclaim space
   â””â”€ Delete old data (1 tahun lalu)

6. Async Scraping (Future):
   â”œâ”€ Use concurrent.futures atau asyncio
   â”œâ”€ Scrape multiple accounts parallel
   â””â”€ Better resource utilization


SECURITY CONSIDERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Password Hashing:
   âœ“ SHA256 (current) â†’ secure untuk basic use
   âš  Consider bcrypt/scrypt untuk better security
   âš  Add salt untuk resist rainbow table attacks

2. SQL Injection Prevention:
   âœ“ Use parameterized queries (text() dengan :param)
   âœ“ Never concatenate user input ke SQL string
   âœ“ SQLAlchemy & sqlite3 parameter binding safe

3. Session Management:
   âœ“ st.session_state stored client-side (encrypted by default)
   âš  Logout clear session_state completely
   âœ“ No sensitive data in session state

4. Access Control:
   âœ“ Role-based (admin vs user)
   âœ“ Check user role sebelum grant access
   âš  Expand: implement permission matrix

5. API/Scraping:
   âœ“ Rotate user agents
   âœ“ Respect rate limits (Instagram, dll)
   âœ“ Use VPN jika terkena IP block

6. Database Backup:
   âœ“ Regular backup (daily recommended)
   âœ“ Store di multiple location (local + cloud)
   âœ“ Test restore procedure


================================================================================
END OF DOCUMENTATION
================================================================================

Version: 1.0
Last Update: 31 Januari 2026
Author: PLN UID Lampung Humas Division
Document Status: Complete & Production-Ready

For questions or updates: contact@pln-uid-lampung.local
